category       success failure   error pending
-------------- ------- ------- ------- -------
affix                8       1       0       0
bugreports          45      34       3       0
collapse             4      17       0       0
condition           17       0       0       0
date                96       5       0       0
decorations          7       0       0       0
disambiguate        19      48       4       0
display              2       3       0       0
etal                 4       0       0       0
flipflop            17       1       0       0
form                 3       0       0       0
fullstyles           2       3       0       0
group                6       0       1       0
integration         10       4       0       0
label               17       2       0       0
locale              23       0       0       0
locator              4       1       0       0
magic               33       6       1       0
name                96      14       1       0
nameattr            97       0       0       0
nameorder            6       0       0       0
namespaces           1       0       0       0
number              18       1       0       0
page                 9       0       0       0
plural               7       0       0       0
position            12       2       1       0
punctuation          9       7       0       0
quotes               4       0       0       0
simplespace          0       1       0       0
sort                40      19       5       0
sortseparator        1       0       0       0
substitute           6       1       0       0
testers              0       0       2       0
textcase            26       1       0       0
unicode              1       0       0       0
variables            3       2       0       0
virtual              1       0       0       0
-------------- ------- ------- ------- -------
(all)              654     173      18       0

Failure → citeproc test test-suite affix_WithCommas.txt
Passed in:
(string) '..[0] John Smith, <i>Book C</i>, 2000, and David Jones, <i>Book D</i>, 2000.
..[1] Smith, <i>Book C</i> is one source,; Jones, <i>Book D</i> is another.
>>[2] Smith, <i>Book C</i>, 23 is one source,; Jones, <i>Book D</i> is another.'
Expected:
(string) '..[0] John Smith, <i>Book C</i>, 2000, and David Jones, <i>Book D</i>, 2000.
..[1] Smith, <i>Book C</i> is one source, Jones, <i>Book D</i> is another.
>>[2] Smith, <i>Book C</i>, 23 is one source, Jones, <i>Book D</i> is another.'

Failure → citeproc test test-suite bugreports_AuthorPosition.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">A00, A., A01, B., A02, C., A03, D., A04, E., A05, F., … A50, K.  (2010). Modelling the Species Distribution of Flat-Headed Cats (<i>Prionailurus planiceps</i>), an Endangered South-East Asian Small Felid. <i>PLoS ONE</i>, <i>5</i>(3), e9612. doi:10.1371/journal.pone.0009612</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">A00, A., A01, B., A02, C., A03, D., A04, E., A05, F., … A50, K. (2010). Modelling the Species Distribution of Flat-Headed Cats (<i>Prionailurus planiceps</i>), an Endangered South-East Asian Small Felid. <i>PLoS ONE</i>, <i>5</i>(3), e9612. doi:10.1371/journal.pone.0009612</div>
</div>'

Failure → citeproc test test-suite bugreports_AutomaticallyDeleteItemsFails.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> J. Doe, <i>Book A</i>, 2000.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> J. Doe, <i>Book B</i>, 2000.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[3]</div><div class="csl-right-inline"> R. Snoakes, <i>Book C</i>, 2000.</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> J. Doe, <i>Book A</i>, 2000.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> J. Doe, <i>Book B</i>, 2000.</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_BadCitationUpdate.txt
Passed in:
(string) 'C. Grignon, C. Sentenac 2000
C. Grignon, C. Sentenac 2000'
Expected:
(string) 'C. Grignon, C. Sentenac 2000a
C. Grignon, C. Sentenac 2000b'

Failure → citeproc test test-suite bugreports_BadDelimiterBeforeCollapse.txt
Passed in:
(string) '(Jones 2000; Smith 2000; Smith 2000)'
Expected:
(string) '(Jones 2000; Smith 2000a,b)'

Failure → citeproc test test-suite bugreports_ByBy.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Review of <i>My Title</i>, by Burtle, Beaver. n.d.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Review of <i>My Title</i>, by Beaver Burtle. n.d.</div>
</div>'

Failure → citeproc test test-suite bugreports_ChicagoAuthorDateLooping.txt
Passed in:
(string) '(Manstein 1982; Anon.; Anon.)'
Expected:
(string) '(Anon.; Anon.; Manstein 1982)'

Failure → citeproc test test-suite bugreports_CitationSortsWithEtAl.txt
Passed in:
(string) '[<i>Aalto et al.</i>, 1999; <i>Aalto et al.</i>, 2000; <i>Aalto et al.</i>, 2001]'
Expected:
(string) '[<i>Aalto et al.</i>, 1999, 2000, 2001]'

Failure → citeproc test test-suite bugreports_CollapseFailure.txt
Passed in:
(string) '(Doe et al. 1965; Doe et al. 1965; Doe et al. 1970)'
Expected:
(string) '(Doe et al. 1965a, 1965b, 1970)'

Failure → citeproc test test-suite bugreports_DemoPageFullCiteCruftOnSubsequent.txt
Passed in:
(string) 'Nolan J. Malone, U.S. Bureau of the Census, <i>Evaluating Components of International Migration: Consistency of 2000 Nativity Data</i> (New York: Routledge, 2001).'
Expected:
(string) 'Malone and U.S. Bureau of the Census, <i>Evaluating Components of International Migration: Consistency of 2000 Nativity Data</i>.'

Failure → citeproc test test-suite bugreports_DisambiguationAddNames.txt
Passed in:
(string) '(Roe et al., 1995; Roe et al., 1995)'
Expected:
(string) '(Roe et al., 1995a, 1995b)'

Failure → citeproc test test-suite bugreports_DisambiguationAddNamesBibliography.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Roe, J., Doe, J. and Smith, J.:, 1995.</div>
  <div class="csl-entry">Roe, J., Noakes, R. and Brown, B.:, 1995.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Roe, J., Doe, J. and Smith, J.:, 1995a.</div>
  <div class="csl-entry">Roe, J., Noakes, R. and Brown, B.:, 1995b.</div>
</div>'

Failure → citeproc test test-suite bugreports_DuplicateSpaces.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> B. D’Arcus, <i>Boundaries of Dissent: Protest and State Power in the Media Age</i>,  New York: Routledge, 2006.</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> B. D’Arcus, <i>Boundaries of Dissent: Protest and State Power in the Media Age</i>, New York: Routledge, 2006.</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_DuplicateSpaces2.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Smith, John, “Some Title.”  <i>Container Title</i>.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Smith, John, “Some Title.” <i>Container Title</i>.</div>
</div>'

Failure → citeproc test test-suite bugreports_DuplicateSpaces3.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">1. Family Name N. The Title. In:  <i>Container Title</i>.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">1. Family Name N. The Title. In: <i>Container Title</i>.</div>
</div>'

Failure → citeproc test test-suite bugreports_EnvAndUrb.txt
Passed in:
(string) '..[0] Baines, T S, O Benedettini and J M Kay, ‘Title One’; Baines, T S, F Gump and J M Kay, ‘Title Two’.
..[1] See reference 1, Baines et al., ‘Title One’.
>>[2] See reference 1, Baines et al., ‘Title Two’.'
Expected:
(string) '>>[0] Baines, T S, O Benedettini and J M Kay, ‘Title One’; Baines, T S, F Gump and J M Kay, ‘Title Two’.
..[1] See reference 1, Baines et al.
>>[2] See reference 1, Baines et al.'

Failure → citeproc test test-suite bugreports_FourAndFour.txt
Passed in:
(string) 'Anne Tyler et al., <i>Ladder of his’ Years</i>, vol. 2003 (New York: Ivy Books, 1997).
Anne Tyler et al., <i>Ladder of his’ Years</i>, vol. 2003 (New York: Ivy Books, 1997).'
Expected:
(string) 'Anne Tyler, George Smith, John Brown, and Cat Garfield, <i>Ladder of his’ Years</i>, vol. 2003 (New York: Ivy Books, 1997).
Anne Tyler, George Smith, John Brown, and Cat Felix, <i>Ladder of his’ Years</i>, vol. 2003 (New York: Ivy Books, 1997).'

Failure → citeproc test test-suite bugreports_IeeePunctuation.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> P.G. Zimbardo, “Does Psychology make a significant difference in our lives?,” <i>American Psychologist</i>,  vol. 59, Jan. 2004, pp. 339–351.</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> P.G. Zimbardo, “Does Psychology make a significant difference in our lives?,” <i>American Psychologist</i>, vol. 59, Jan. 2004, pp. 339–351.</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_LabelsOutOfPlace.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Jones, Colin. <i>Bourgeois Revolution Revivified: 1789 and Social Change</i>.  Edited by Colin Lucas. Oxford: Clarendon Press, 1991.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Jones, Colin. <i>Bourgeois Revolution Revivified: 1789 and Social Change</i>. Edited by Colin Lucas. Oxford: Clarendon Press, 1991.</div>
</div>'

Failure → citeproc test test-suite bugreports_MatchedAuthorAndDate.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Brown, J. 2006, August. <i><b>Tijdschrift voor praktijkondersteuning</b></i>. http://dx.doi.org/10.1007/bf03074904.</div>
  <div class="csl-entry">Brown, J. 2006, August. <i><b>Huisarts en Wetenschap</b></i>. http://dx.doi.org/10.1007/bf03084836.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Brown, J. 2006a, August. <b><i>Tijdschrift voor praktijkondersteuning</i></b>. http://dx.doi.org/10.1007/bf03074904.</div>
  <div class="csl-entry">Brown, J. 2006b, August. <b><i>Huisarts en Wetenschap</i></b>. http://dx.doi.org/10.1007/bf03084836.</div>
</div>'

Failure → citeproc test test-suite bugreports_MovePunctuationInsideQuotesForLocator.txt
Passed in:
(string) 'Jennifer J. Davis, “Men of Taste: Gender and Authority in the French Culinary Trades, 1730-1830” (Ph.D. diss., Pennsylvania State University, History, 2004), “gargoyle.”'
Expected:
(string) 'Jennifer J. Davis, “Men of Taste: Gender and Authority in the French Culinary Trades, 1730-1830” (Ph.D. diss., Pennsylvania State University, History, 2004), s.v. “gargoyle.”'

Failure → citeproc test test-suite bugreports_NoCaseEscape.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">Aalto, Alan</div>

    <div class="csl-left-margin"> N.d.</div><div class="csl-right-inline">““PIAAC-Longitudinal (PIAAC-L) 2015.””</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Aalto, Alan</div>

    <div class="csl-left-margin"> N.d.</div><div class="csl-right-inline">“PIAAC-Longitudinal (PIAAC-Lx) 2015.”</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">Aalto, Alan</div>

    <div class="csl-left-margin"> N.d.</div><div class="csl-right-inline">“‘PIAAC-Longitudinal (PIAAC-L) 2015.’”</div>
  </div>
  <div class="csl-entry"> 
    <div class="csl-left-margin">N.d.</div><div class="csl-right-inline">“PIAAC-Longitudinal (PIAAC-Lx) 2015.”</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_OldMhraDisambiguationFailure.txt
Passed in:
(string) '..[0] John Doe, <i>Book A</i>, 2000, p. , p. ; John Doe, <i>Book B</i>, 2000, p. , p. .
>>[1] Doe, Book A, p. , p. ; Doe, Book B, p. , p. .'
Expected:
(string) '>>[0] John Doe, <i>Book A</i>, 2000; John Doe, <i>Book B</i>, 2000.
>>[1] Doe, Book A; Doe, Book B.'

Failure → citeproc test test-suite bugreports_ProcessorHang1.txt
Passed in:
(string) '(Philpott et al. 2008)
(Philpott et al. 2008)
(Philpott et al. 2008)'
Expected:
(string) '(Philpott, Arendt, et al. 2008)
(Philpott, Perfecto, et al. 2008<i>a</i>)
(Philpott, Perfecto, et al. 2008<i>b</i>)'

Failure → citeproc test test-suite bugreports_SingleQuote.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline">“production d ' eau glacée à condensation à eau avec récupération de chaleur . Modélisation simplifiée dans l ’ optique d ’ un calcul des consommations d ’ énergie d ’ une insta.”</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline">“production d ’ eau glacée à condensation à eau avec récupération de chaleur . Modélisation simplifiée dans l ’ optique d ’ un calcul des consommations d ’ énergie d ’ une insta.”</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_SingleQuoteXml.txt
Passed in:
(string) '[O A. "hello" <i>Book Title</i> ; Cite with a composer]'
Expected:
(string) '[Cite with a composer ; O A. "hello" <i>Book Title</i>]'

Failure → citeproc test test-suite bugreports_SmallCapsEscape.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">Aalto, Alan</div>

    <div class="csl-left-margin"> N.d.</div><div class="csl-right-inline"><span style="font-variant:small-caps;">Here</span></div>
    .</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">Aalto, Alan</div>

    <div class="csl-left-margin"> N.d.</div><div class="csl-right-inline"><span style="font-variant:small-caps;">Here</span>.</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_SortSecondaryKey.txt
Passed in:
(string) '(Roe, 1995; Roe, 1996)'
Expected:
(string) '(Roe, 1995, 1996)'

Failure → citeproc test test-suite bugreports_StyleError001.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><i>Anonymous Journal</i>, p. .</div>
  <div class="csl-entry"><i>Anonymous Journal One</i>. p. .</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><i>Anonymous Journal</i>.</div>
  <div class="csl-entry"><i>Anonymous Journal One</i>.</div>
</div>'

Failure → citeproc test test-suite bugreports_UndefinedInName3.txt
Passed in:
(string) 'B-X Kim and A-Y Kim, p. .
Kim and Kim, 23.'
Expected:
(string) 'B-X Kim and A-Y Kim.
Kim and Kim, 23.'

Failure → citeproc test test-suite bugreports_YearSuffixInHarvard1.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Africa News, 2006. Burkina Faso: Journalist Case Puts Spotlight On Justice System. <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2010. Niger: Who Really Ousted Tandja, And Why?. <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2007. Uganda: Police Protect Besigye Rally. <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2006. Uganda: UK, US Deploy Observers. <i>Africa News</i>.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Africa News, 2006a. Burkina Faso: Journalist Case Puts Spotlight On Justice System. <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2010. Niger: Who Really Ousted Tandja, And Why? <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2007. Uganda: Police Protect Besigye Rally. <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2006b. Uganda: UK, US Deploy Observers. <i>Africa News</i>.</div>
</div>'

Failure → citeproc test test-suite bugreports_YearSuffixLingers.txt
Passed in:
(string) 'Smith 1990
Smith 1990
Jones 1990'
Expected:
(string) 'Smith 1990a
Smith 1990b
Jones 1990'

Failure → citeproc test test-suite bugreports_ikeyOne.txt
Passed in:
(string) '..[0] (Smith, <i>Book B</i>)'
Expected:
(string) '>>[0] (Smith)'

Failure → citeproc test test-suite bugreports_parenthesis.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">  (2006): 1–7.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"> (2006): 1–7.</div>
</div>'

Failure → citeproc test test-suite bugreports_parseName.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Happel, Eduard "van 2008</div>
  <div class="csl-entry">Hoppel, Gustav von 2008</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">van Happel, Eduard 2008</div>
  <div class="csl-entry">Hoppel, Gustav von 2008</div>
</div>'

Failure → citeproc test test-suite collapse_AuthorCollapse.txt
Passed in:
(string) '(Smith 1900, Smith 2000)'
Expected:
(string) '(Smith 1900, 2000)'

Failure → citeproc test test-suite collapse_AuthorCollapseNoDate.txt
Passed in:
(string) '(Smith, Smith 1900, Smith 2000)'
Expected:
(string) '(Smith, 1900, 2000)'

Failure → citeproc test test-suite collapse_AuthorCollapseNoDateSorted.txt
Passed in:
(string) '(Smith 325AD, Smith 2000, Smith)'
Expected:
(string) '(Smith 325AD, 2000)'

Failure → citeproc test test-suite collapse_ChicagoAfterCollapse.txt
Passed in:
(string) '(Whittaker 1967, Whittaker 1975, Wiens 1989, Wiens 1989)
(Wong 1999, 328, Wong 2000, 475, Garcia 1998, 67)
(Whittaker 1967, Wiens 1989)'
Expected:
(string) '(Whittaker 1967, 1975; Wiens 1989a, 1989b)
(Wong 1999, 328; 2000, 475; Garcia 1998, 67)
(Whittaker 1967; Wiens 1989b)'

Failure → citeproc test test-suite collapse_CitationNumberRangesInsert.txt
Passed in:
(string) '..[0] [4]
>>[1] [1], [2], [3], [4]'
Expected:
(string) '..[0] [1]
>>[1] [1]–[4]'

Failure → citeproc test test-suite collapse_CitationNumberRangesMixed.txt
Passed in:
(string) '([1], [2], [3], [4], [5], [6], [7])
([1], [2], [3], [5], [6], [7])'
Expected:
(string) '([1]–[7])
([1]–[3], [5]–[7])'

Failure → citeproc test test-suite collapse_CitationNumberRangesMixed2.txt
Passed in:
(string) '([1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11])
([1], [3], [4], [5], [7], [9], [10], [11])'
Expected:
(string) '([1]–[11])
([1], [3]–[5], [7], [9]–[11])'

Failure → citeproc test test-suite collapse_CitationNumberRangesMixed3.txt
Passed in:
(string) '([1], [2], [3], [4], [5], [6], [7], [8])
([1], [4], [6], [7], [8])'
Expected:
(string) '([1]–[8])
([1], [4], [6]–[8])'

Failure → citeproc test test-suite collapse_CitationNumberRangesWithAffixes.txt
Passed in:
(string) '<b>([1],[2],[3])</b>'
Expected:
(string) '<b>([1]–[3])</b>'

Failure → citeproc test test-suite collapse_CitationNumberRangesWithAffixesGrouped.txt
Passed in:
(string) '<b>([1],[2],[3])</b>'
Expected:
(string) '<b>([1]–[3])</b>'

Failure → citeproc test test-suite collapse_NumericDuplicate.txt
Passed in:
(string) '(1,2,2,3,4)'
Expected:
(string) '(1,2,2–4)'

Failure → citeproc test test-suite collapse_NumericDuplicate2.txt
Passed in:
(string) '(1,2,3,3,4,5)'
Expected:
(string) '(1–3,3–5)'

Failure → citeproc test test-suite collapse_TrailingDelimiter.txt
Passed in:
(string) '(Condit et al. 2000, Condit et al. 1995, Condit et al. 1998, Connell 1971, Cortes &#38; Hunziker 1971)'
Expected:
(string) '(Condit et al. 2000, 1995, 1998; Connell 1971, Cortes &#38; Hunziker 1971)'

Failure → citeproc test test-suite collapse_YearSuffixCollapse.txt
Passed in:
(string) 'Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2001
Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2001'
Expected:
(string) 'Smith 2000a–e, 2001
Smith 2000a,c–e, 2001'

Failure → citeproc test test-suite collapse_YearSuffixCollapseNoRange.txt
Passed in:
(string) 'Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2001
Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2001'
Expected:
(string) 'Smith 2000a,b,c,d,e, 2001
Smith 2000a,c,d,e, 2001'

Failure → citeproc test test-suite collapse_YearSuffixCollapseNoYearSuffixDelimiter.txt
Passed in:
(string) 'Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2001
Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2001'
Expected:
(string) 'Smith 2000a–e;2001
Smith 2000a;c–e;2001'

Failure → citeproc test test-suite collapse_YearSuffixImplicitCollapseNoYearSuffixDelimiter.txt
Passed in:
(string) 'Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2001
Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2001'
Expected:
(string) 'Smith 2000a–e;2001
Smith 2000a;c–e;2001'

Failure → citeproc test test-suite date_LopsidedDataYearSuffixCollapse.txt
Passed in:
(string) '(Smith 1982, Smith 1982)'
Expected:
(string) '(Smith 1982a,b)'

Failure → citeproc test test-suite date_YearSuffixDelimiter.txt
Passed in:
(string) 'Doe 2000;Doe 2000;Doe 2001'
Expected:
(string) 'Doe 2000a,b;2001'

Failure → citeproc test test-suite date_YearSuffixImplicitWithNoDate.txt
Passed in:
(string) '(John Doe n.d. [Accessed:  June 1, 1965]; John Doe n.d. [Accessed:  June 1, 2065])'
Expected:
(string) '(John Doe n.d.-a [Accessed: June 1, 1965]; John Doe n.d.-b [Accessed: June 1, 2065])'

Failure → citeproc test test-suite date_YearSuffixImplicitWithNoDateOneOnly.txt
Passed in:
(string) '(John Doe n.d. [Accessed:  June 1, 1965])'
Expected:
(string) '(John Doe n.d. [Accessed: June 1, 1965])'

Failure → citeproc test test-suite date_YearSuffixWithNoDate.txt
Passed in:
(string) '(John Doe n.d. [Accessed:  June 1, 1965]; John Doe n.d. [Accessed:  June 1, 2065])'
Expected:
(string) '(John Doe n.d.-a [Accessed: June 1, 1965]; John Doe n.d.-b [Accessed: June 1, 2065])'

Failure → citeproc test test-suite disambiguate_AddNamesSuccess.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown, et al. (1980); Smith, Beefheart, et al. (1980)'

Failure → citeproc test test-suite disambiguate_AllNamesBaseNameCountOnFailureIfYearSuffixAvailable.txt
Passed in:
(string) 'Asthma et al. (1990); Asthma et al. (1990); Dropsy et al. (2000); Dropsy et al. (2000)'
Expected:
(string) 'Asthma et al. (1990a); Asthma et al. (1990b); Dropsy, Edward Enteritis, et al. (2000); Dropsy, Ernie Enteritis, et al. (2000)'

Failure → citeproc test test-suite disambiguate_AllNamesGenerally.txt
Passed in:
(string) 'Asthma, Bronchitis and Cold (1980); Asthma, Bronchitis and Cold (1995)'
Expected:
(string) 'Asthma, Bosworth Bronchitis and C. Cold (1980); Asthma, Beauregarde Bronchitis and O. Cold (1995)'

Failure → citeproc test test-suite disambiguate_AllNamesSimpleSequence.txt
Passed in:
(string) '(Malone 2001; Malone 1951)'
Expected:
(string) '(Nolan J. Malone 2001; Kemp Malone 1951)'

Failure → citeproc test test-suite disambiguate_AllNamesWithInitialsGenerally.txt
Passed in:
(string) 'Asthma, Bronchitis and Cold (1980); Asthma, Bronchitis and Cold (1995)'
Expected:
(string) 'Asthma, Bronchitis and C. Cold (1980); Asthma, Bronchitis and O. Cold (1995)'

Failure → citeproc test test-suite disambiguate_AndreaEg1a.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown, et al. (1980); Smith, Brown, et al. (1980)
Smith, Brown, et al. (1980); Smith, Benson, et al. (1980)
Smith, Brown, et al. (1980); Smith, Brown, et al. (1980)'

Failure → citeproc test test-suite disambiguate_AndreaEg1b.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; J. Jones (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Benson, et al. (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; A. Jones (1980)'

Failure → citeproc test test-suite disambiguate_AndreaEg2.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; J. Jones (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Benson, et al. (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; A. Jones (1980)'

Failure → citeproc test test-suite disambiguate_AndreaEg3.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown &#38; J. Jones (1980a); Smith, Brown &#38; J. Jones (1980b)
Smith, Brown &#38; J. Jones (1980a); Smith, Benson, et al. (1980)
Smith, Brown &#38; J. Jones (1980a); Smith, Brown &#38; A. Jones (1980)'

Failure → citeproc test test-suite disambiguate_AndreaEg4.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; J. Jones (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Benson, et al. (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; A. Jones (1980)'

Failure → citeproc test test-suite disambiguate_AndreaEg5.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown &#38; J. Jones (1980a); Smith, Brown &#38; J. Jones (1980b)
Smith, Brown &#38; J. Jones (1980a); Smith, Benson, et al. (1980)
Smith, Brown &#38; J. Jones (1980a); Smith, Brown &#38; A. Jones (1980)'

Failure → citeproc test test-suite disambiguate_BasedOnEtAlSubsequent.txt
Passed in:
(string) '(Baur, Fröberg, Baur, et al. 2000; Baur, Schileyko &#38; Baur, et al. 2000; Doe 2000)'
Expected:
(string) '(Baur, Fröberg, Baur, et al. 2000<i>a</i>; Baur, Schileyko &#38; Baur 2000<i>b</i>; Doe 2000)'

Failure → citeproc test test-suite disambiguate_BasedOnSubsequentFormWithBackref2.txt
Passed in:
(string) '..[0] John Doe, His Book (2000); John Doe, His Other Book (2001).
..[1] Jane Roe, Her Book (1998).
..[2] Roe, Her Book, supra note 2.
..[3] Doe, His Book, supra note 1.
>>[4] Roe, Her Book, supra note 2.'
Expected:
(string) '..[0] John Doe, His Book (2000); John Doe, His Other Book (2001).
..[1] Jane Roe, Her Book (1998).
..[2] Roe, supra note 2.
..[3] Doe, His Book, supra note 1.
>>[4] Roe, supra note 2.'

Failure → citeproc test test-suite disambiguate_ByCiteBaseNameCountOnFailureIfYearSuffixAvailable.txt
Passed in:
(string) 'Asthma et al. (1990); Asthma et al. (1990); Dropsy et al. (2000); Dropsy et al. (2000)'
Expected:
(string) 'Asthma, Bosworth Bronchitis, et al. (1990); Asthma, Beauregarde Bronchitis, et al. (1990); Dropsy, Edward Enteritis, et al. (2000); Dropsy, Ernie Enteritis, et al. (2000)'

Failure → citeproc test test-suite disambiguate_ByCiteGivennameExpandCrossNestedNames.txt
Passed in:
(string) 'J. Doe et al.; J. Doe et al.; J. Doe et al.'
Expected:
(string) 'J. Doe, Jane Roe, Robert Jones; J. Doe, Josephine Roe, et al.; J. Doe, Jane Roe, Richard Jones'

Failure → citeproc test test-suite disambiguate_ByCiteGivennameNoShortFormInitializeWith.txt
Passed in:
(string) 'J Roe
J Doe; J Doe'
Expected:
(string) 'J Roe
John Doe; Jack Doe'

Failure → citeproc test test-suite disambiguate_ByCiteGivennameShortFormInitializeWith.txt
Passed in:
(string) 'Roe
Doe; Doe
Smith; Smith'
Expected:
(string) 'Roe
J Doe; A Doe
Thomas Smith; Ted Smith'

Failure → citeproc test test-suite disambiguate_ByCiteGivennameShortFormNoInitializeWith.txt
Passed in:
(string) 'Roe
Doe; Doe'
Expected:
(string) 'Roe
John Doe; Aloysius Doe'

Failure → citeproc test test-suite disambiguate_ByCiteIncremental1.txt
Passed in:
(string) '(Baines et al., 2009)
(Baines et al., 2009)
(Grubic et al., 2009)'
Expected:
(string) '(Baines, Lightfoot, Benedettini, et al., 2009)
(Baines, Lightfoot and Kay, 2009)
(Grubic et al., 2009)'

Failure → citeproc test test-suite disambiguate_ByCiteIncremental2.txt
Passed in:
(string) '(Baines et al., 2009; Baines et al., 2009)'
Expected:
(string) '(Baines, Lightfoot, Benedettini, et al., 2009; Baines, Lightfoot and Kay, 2009)'

Failure → citeproc test test-suite disambiguate_ByCiteMinimalGivennameExpandMinimalNames.txt
Passed in:
(string) 'A. Asthma et al.; A. Asthma et al.'
Expected:
(string) 'A. Asthma, Brandon Bronchitis, et al.; A. Asthma, Biff Bronchitis, et al.'

Failure → citeproc test test-suite disambiguate_ByCiteRetainNamesOnFailureIfYearSuffixNotAvailable.txt
Passed in:
(string) 'Asthma et al. (1990); Asthma et al. (1990); Dropsy et al. (2000); Dropsy et al. (2000)'
Expected:
(string) 'Asthma, Bosworth Bronchitis, et al. (1990); Asthma, Beauregarde Bronchitis, et al. (1990); Dropsy, Edward Enteritis, et al. (2000); Dropsy, Ernie Enteritis, et al. (2000)'

Failure → citeproc test test-suite disambiguate_CitationLabelDefault.txt
Passed in:
(string) '[CSL STYLE ERROR: reference with no printed form.]'
Expected:
(string) 'Asth00a; Asth00b; Bron00'

Failure → citeproc test test-suite disambiguate_CitationLabelInData.txt
Passed in:
(string) 'SpiffLabel1900; SpiffLabel1900'
Expected:
(string) 'SpiffLabel1900a; SpiffLabel1900b; Bron00; BrCh98; DEFG26'

Failure → citeproc test test-suite disambiguate_DisambiguateTrueAndYearSuffixOne.txt
Passed in:
(string) 'Pollock, Title One, 1979
Pollock, Title Two, 1980'
Expected:
(string) 'Pollock, 1979
Pollock, 1980'

Failure → citeproc test test-suite disambiguate_DisambiguateTrueReflectedInBibliography.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Smith, Book One</div>
  <div class="csl-entry">Smith, Book Two</div>
  <div class="csl-entry">Brown, Book the X</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Smith, Book One</div>
  <div class="csl-entry">Smith, Book Two</div>
  <div class="csl-entry">Brown</div>
</div>'

Failure → citeproc test test-suite disambiguate_DisambiguationHang.txt
Passed in:
(string) '..[0] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990)
..[1] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990)
>>[2] (Caminiti, Johnson, &#38; Urbano 1990)'
Expected:
(string) '>>[0] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990a)
>>[1] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990b)
>>[2] (Caminiti, Johnson, &#38; Urbano 1990)'

Failure → citeproc test test-suite disambiguate_ImplicitYearSuffixOnceOnly.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[1990] Doe, Book A 05/30/1990</div>
  <div class="csl-entry">[1990] Doe, Book B 05/30/1990</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[1990a] Doe, Book A 05/30/1990</div>
  <div class="csl-entry">[1990b] Doe, Book B 05/30/1990</div>
</div>'

Failure → citeproc test test-suite disambiguate_IncrementalExtraText.txt
Passed in:
(string) 'Yost Trisk, Book One
John Smith, Book One, ed. 3
John Smith, Book Two, ed. 4
John Smith, Complete Works, ed. 5
John Smith, Complete Works, ed. 6'
Expected:
(string) 'Yost Trisk
John Smith, Book One
John Smith, Book Two
John Smith, Complete Works, ed. 5
John Smith, Complete Works, ed. 6'

Failure → citeproc test test-suite disambiguate_InitializeWithButNoDisambiguation.txt
Passed in:
(string) '(Doe, 1965; Doe, 1965)'
Expected:
(string) '(Doe, 1965a, 1965b)'

Failure → citeproc test test-suite disambiguate_LastOnlyFailWithByCite.txt
Passed in:
(string) 'Organisation 2010
Organisation 2010'
Expected:
(string) 'Organisation 2010a
Organisation 2010b'

Failure → citeproc test test-suite disambiguate_NoTextElementUsesYearSuffixVariable.txt
Passed in:
(string) 'Doe (2000); Doe (2000)'
Expected:
(string) 'Doe (2000a); Doe (2000b)'

Failure → citeproc test test-suite disambiguate_PrimaryNameGenerally.txt
Passed in:
(string) 'Asthma and Bronchitis (1980); Asthma and Bronchitis (1995)'
Expected:
(string) 'Aloysius Asthma and Bronchitis (1980); Artemis Asthma and Bronchitis (1995)'

Failure → citeproc test test-suite disambiguate_PrimaryNameWithInitialsLimitedToPrimary.txt
Passed in:
(string) 'Asthma et al. (1980); Asthma et al. (1995); Dropsy and Asthma (1995)'
Expected:
(string) 'A. Asthma et al. (1980); G. Asthma et al. (1995); Dropsy and Asthma (1995)'

Failure → citeproc test test-suite disambiguate_SetsOfNames.txt
Passed in:
(string) '(Ely et al. 2001; Ely et al. 2001; Ely et al. 2001)'
Expected:
(string) '(Ely, Gautam, et al. 2001; Ely, Inouye, et al. 2001; Ely, Margolin, et al. 2001)'

Failure → citeproc test test-suite disambiguate_SkipAccessedYearSuffix.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><b>Doe J</b>. His Anonymous Life.  http://example.com (accessed 15 December 2000). 1965</div>
  <div class="csl-entry"><b>Doe J</b>. His Anonymous Life.  http://example.com (accessed 15 December 2000). 1965</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><b>Doe J</b>. His Anonymous Life. http://example.com (accessed 15 December 2000). 1965a</div>
  <div class="csl-entry"><b>Doe J</b>. His Anonymous Life. http://example.com (accessed 15 December 2000). 1965b</div>
</div>'

Failure → citeproc test test-suite disambiguate_ToInitialOnly.txt
Passed in:
(string) 'Smith; Smith; Muggins; Muggins'
Expected:
(string) 'Smith; Smith; B. Muggins; J. Muggins'

Failure → citeproc test test-suite disambiguate_Trigraph.txt
Passed in:
(string) '[CSL STYLE ERROR: reference with no printed form.]
[CSL STYLE ERROR: reference with no printed form.]
[CSL STYLE ERROR: reference with no printed form.]'
Expected:
(string) 'Aalt02a
Aalt02b
Aalt02c'

Failure → citeproc test test-suite disambiguate_YearCollapseWithInstitution.txt
Passed in:
(string) '(Smith Co 2000; Smith Co 2000; Smith Co 2000)
(Smith Co 2000)
(Smith Co 2000)'
Expected:
(string) '(Smith Co 2000a; 2000b; 2000c)
(Smith Co 2000b)
(Smith Co 2000c)'

Failure → citeproc test test-suite disambiguate_YearSuffixAndSort.txt
Passed in:
(string) '1990; 1990; 1990; 1990; 1990; 1990; 1990; 1990; 1990; 1990; 1990; 1990; 1990'
Expected:
(string) '1990m!; 1990l!; 1990k!; 1990j!; 1990i!; 1990h!; 1990g!; 1990f!; 1990e!; 1990d!; 1990c!; 1990b!; 1990a!'

Failure → citeproc test test-suite disambiguate_YearSuffixAtTwoLevels.txt
Passed in:
(string) 'Smith et al. (1986); Smith et al. (1986); Smith et al. (1986); Smith et al. (1986)'
Expected:
(string) 'Smith, Jones &#38; Brown (1986a); Smith, Jones &#38; Brown (1986b); Smith, Jones, Brown, et al. (1986a); Smith, Jones, Brown, et al. (1986b)'

Failure → citeproc test test-suite disambiguate_YearSuffixMacroSameYearExplicit.txt
Passed in:
(string) 'Smith 2001
Smith 2001'
Expected:
(string) 'A Smith 2001
B Smith 2001'

Failure → citeproc test test-suite disambiguate_YearSuffixMacroSameYearImplicit.txt
Passed in:
(string) 'Smith 2001
Smith 2001'
Expected:
(string) 'A Smith 2001
B Smith 2001'

Failure → citeproc test test-suite disambiguate_YearSuffixMixedDates.txt
Passed in:
(string) '(A Ylinen, 1995; A Ylinen, 1995; A Ylinen, 1995)'
Expected:
(string) '(A Ylinen, 1995a; b; c)'

Failure → citeproc test test-suite disambiguate_YearSuffixTwoPairsBibliography.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">J. Doe and S. Jones, 1999</div>
  <div class="csl-entry">J. Doe and S. Jones, 1999</div>
  <div class="csl-entry">J. Doe and S. Smith, 1999</div>
  <div class="csl-entry">J. Doe and S. Smith, 1999</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">J. Doe and S. Jones, 1999a</div>
  <div class="csl-entry">J. Doe and S. Jones, 1999b</div>
  <div class="csl-entry">J. Doe and S. Smith, 1999a</div>
  <div class="csl-entry">J. Doe and S. Smith, 1999b</div>
</div>'

Failure → citeproc test test-suite disambiguate_YearSuffixTwoPairsFirstNameBibliography.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">J. Doe and S. Jones, 1999</div>
  <div class="csl-entry">J. Doe and S. Jones, 1999</div>
  <div class="csl-entry">J. Doe and S. Smith, 1999</div>
  <div class="csl-entry">J. Doe and S. Smith, 1999</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">J. Doe and S. Jones, 1999a</div>
  <div class="csl-entry">J. Doe and S. Jones, 1999b</div>
  <div class="csl-entry">J. Doe and S. Smith, 1999a</div>
  <div class="csl-entry">J. Doe and S. Smith, 1999b</div>
</div>'

Failure → citeproc test test-suite disambiguate_YearSuffixWithEtAlSubequent.txt
Passed in:
(string) '(Smith 2000; Smith 2000; Smith 2000)
(Smith 2000)
(Smith 2000)'
Expected:
(string) '(Smith 2000a; 2000b; 2000c)
(Smith 2000b)
(Smith 2000c)'

Failure → citeproc test test-suite disambiguate_YearSuffixWithMixedCreatorTypes.txt
Passed in:
(string) '(Asthma 1990)
(Asthma 1990)'
Expected:
(string) '(Asthma 1990a)
(Asthma 1990b)'

Failure → citeproc test test-suite display_AuthorAsHeading.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">John Aloysius Doe</div>

    <div class="csl-left-margin">1999</div><div class="csl-right-inline">Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">John Aloysius Doe</div>

    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">1999</div><div class="csl-right-inline">Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">1999</div><div class="csl-right-inline">Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">John Aloysius Doe</div>

    <div class="csl-left-margin">1999</div><div class="csl-right-inline">Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">1999a</div><div class="csl-right-inline">Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">1999b</div><div class="csl-right-inline">Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee</div>
  </div>
</div>'

Failure → citeproc test test-suite display_LostSuffix.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Book One,  (zitiert als: <i>Aalto</i>, Chapter One).</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Book One, (zitiert als: <i>Aalto</i>, Chapter One).</div>
</div>'

Failure → citeproc test test-suite display_SecondFieldAlignMigratePunctuation.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> B. D’Arcus, <i>Boundaries of Dissent: Protest and State Power in the Media Age</i>, Routledge, 2005.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> F.G. Bennett Jr., “Getting Property Right: “Informal” Mortgages in the Japanese Courts,” <i>Pac. Rim L. &#38; Pol’y J.</i>,  vol. 18, Aug. 2009, pp. 463–509.</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> B. D’Arcus, <i>Boundaries of Dissent: Protest and State Power in the Media Age</i>, Routledge, 2005.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> F.G. Bennett Jr., “Getting Property Right: ‘Informal’ Mortgages in the Japanese Courts,” <i>Pac. Rim L. &#38; Pol’y J.</i>, vol. 18, Aug. 2009, pp. 463–509.</div>
  </div>
</div>'

Failure → citeproc test test-suite flipflop_LeadingMarkupWithApostrophe.txt
Passed in:
(string) '<i>Insha’Allah</i> is an Arabic phrase meaning “God willing”. Another Arabic word is <i>bukra</i>. Aalto'
Expected:
(string) '<i>Insha’Allah</i> is an Arabic phrase meaning ‘God willing’. Another Arabic word is <i>bukra</i>. Aalto'

Failure → citeproc test test-suite fullstyles_ABdNT.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">COLE, S. J.; MOORE, R. Hydrological modelling using raingauge- and radar-based estimators of areal rainfall. <b>Journal of Hydrology</b>, v. 358, n. 3-4, p. 159–181, 2008. </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">COLE, S. J.; MOORE, R. Hydrological modelling using raingauge- and radar-based estimators of areal rainfall. <b>Journal of Hydrology</b>, v. 358, n. 3–4, p. 159–181, 2008. </div>
</div>'

Failure → citeproc test test-suite fullstyles_ChicagoArticleTitleQuestion.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. 1994. An article is it?. <i>New Thinker</i> 10: 5.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. 1994. An article is it? <i>New Thinker</i> 10: 5.</div>
</div>'

Failure → citeproc test test-suite fullstyles_ChicagoAuthorDateSimple.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. 1990. <i>Book A</i>. Brobdingnag: Zardoz Press.</div>
  <div class="csl-entry">Doe, John, and Jane Roe. 1991. <i>Book B</i>.</div>
  <div class="csl-entry">Doe, John, Jane Roe, and Alvin Asthma. 1992. <i>Book C</i>.</div>
  <div class="csl-entry">Doe, John, Jane Roe, Alvin Asthma, Bob Bronchitis, Chris Cold, Don Dropsy, Ernie Enteritis, et al. 1993. <i>Book D</i>.</div>
  <div class="csl-entry">Doe, John, Jane Roe, Alvin Asthma, Bob Bronchitis, Chris Cold, Don Dropsy, Ernie Enteritis, et al. 1994. <i>Book E</i>.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. 1990. <i>Book A</i>. Brobdingnag: Zardoz Press.</div>
  <div class="csl-entry">Doe, John, and Jane Roe. 1991. <i>Book B</i>.</div>
  <div class="csl-entry">Doe, John, Jane Roe, and Alvin Asthma. 1992. <i>Book C</i>.</div>
  <div class="csl-entry">Doe, John, Jane Roe, Alvin Asthma, Bob Bronchitis, Chris Cold, Don Dropsy, Ernie Enteritis, et al. 1993. <i>Book D</i>.</div>
  <div class="csl-entry">---. 1994. <i>Book E</i>.</div>
</div>'

Failure → citeproc test test-suite integration_DuplicateItem.txt
Passed in:
(string) '..[0] la Berge, Nagel, Dement &#38; Zarcone (1981)'
Expected:
(string) '>>[0] la Berge, Nagel, Dement &#38; Zarcone (1981)'

Failure → citeproc test test-suite integration_DuplicateItem2.txt
Passed in:
(string) '..[0] la Berge, Nagel, Dement &#38; Zarcone (1981)'
Expected:
(string) '>>[0] la Berge, Nagel, Dement &#38; Zarcone (1981)'

Failure → citeproc test test-suite integration_FirstReferenceNoteNumberPositionChange.txt
Passed in:
(string) '>>[0] Snoakes, “Life of Snoakes” (1902).
..[1] Doe, “Life of Doe” (1901).
..[2] Roe, “Life of Roe” (1900).
>>[3] Doe, supra note 2.
>>[4] Roe, supra note 3.'
Expected:
(string) '>>[0] Snoakes, “Life of Snoakes” (1902).
>>[1] Doe, “Life of Doe” (1901).
>>[2] Roe, “Life of Roe” (1900).
>>[3] Doe, supra note 2.
>>[4] Roe, supra note 3.'

Failure → citeproc test test-suite integration_YearSuffixOnOffOn.txt
Passed in:
(string) '>>[0] Smith (1986); Smith (1986); Smith (1986); Smith (1986)'
Expected:
(string) '>>[0] Smith (1986a); Smith (1986b); Smith (1986c); Smith (1986d)'

Failure → citeproc test test-suite label_EditorTranslator1.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">1.	Иванов И.И. 
    . Пример оформления книги с редактором и переводчиком в одном лице : вид издания : in 5 vols. Vol. 2 / И.И. Иванов, П.П. Петров, С.С. Сидоров;  ed. Р.Р. Романов;  tran. Р.Р. Романов Дополнительно. –  Тюмень: Дом, 2013. – 10. – 100 p..</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">1.	Иванов И.И. Пример оформления книги с редактором и переводчиком в одном лице : вид издания : in 5 vols. Vol. 2 / И.И. Иванов, П.П. Петров, С.С. Сидоров; ed &#38; trans. Р.Р. Романов Дополнительно. – Тюмень: Дом, 2013. – 10. – 100 p.</div>
</div>'

Failure → citeproc test test-suite label_NameLabelThroughSubstitute.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Wolf, K. S.  (2005). The future for Deaf individuals is not that bleak [Peer commentary, <i>Decrease of Deaf potential in a mainstreamed environment</i>, by W. C. Hall]. Retrieved from http://www.personalityresearch.org/papers/hall.html</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Wolf, K. S. (2005). The future for Deaf individuals is not that bleak [Peer commentary, <i>Decrease of Deaf potential in a mainstreamed environment</i>, by W. C. Hall]. Retrieved from http://www.personalityresearch.org/papers/hall.html</div>
</div>'

Failure → citeproc test test-suite locator_SimpleLocators.txt
Passed in:
(string) 'Doe, Book A, 2000, pp. 100–103; Roe, Book B, 2001, chaps. 200 - 201.'
Expected:
(string) 'Doe, Book A, 2000, pp. 100–103; Roe, Book B, 2001, chaps. 200–201.'

Failure → citeproc test test-suite magic_CitationLabelInBibliography.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">Roe, J. and Noakes, R.:</div><div class="csl-right-inline"> Book A., 1978.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">Doe, J.:</div><div class="csl-right-inline"> Book A., 1965.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">Roe, J. and Noakes, R.:</div><div class="csl-right-inline"> Book A., 1978.</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[Doe65]</div><div class="csl-right-inline">Doe, J.: Book A., 1965.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[RoNo78a]</div><div class="csl-right-inline">Roe, J. and Noakes, R.: Book A., 1978.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[RoNo78b]</div><div class="csl-right-inline">Roe, J. and Noakes, R.: Book A., 1978.</div>
  </div>
</div>'

Failure → citeproc test test-suite magic_CitationLabelInCitation.txt
Passed in:
(string) '[]'
Expected:
(string) '[Doe65, RoNo78a, RoNo78b]'

Failure → citeproc test test-suite magic_ImplicitYearSuffixDelimiter.txt
Passed in:
(string) 'John Doe 1965; John Doe 1965'
Expected:
(string) 'John Doe 1965a; b'

Failure → citeproc test test-suite magic_ImplicitYearSuffixExplicitDelimiter.txt
Passed in:
(string) '(1965; 1965)'
Expected:
(string) '(1965a,b)'

Failure → citeproc test test-suite magic_SubsequentAuthorSubstitute.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">John Smith and Jane Roe, Book A (2000)</div>
  <div class="csl-entry">John Smith and Jane Roe, Book B (2001)</div>
  <div class="csl-entry">John Smith, Book C (2002)</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">John Smith and Jane Roe, Book A (2000)</div>
  <div class="csl-entry">———, Book B (2001)</div>
  <div class="csl-entry">John Smith, Book C (2002)</div>
</div>'

Failure → citeproc test test-suite magic_SubsequentAuthorSubstituteOfTitleField.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Warren Smith (2000)</div>
  <div class="csl-entry">Warren Smith (2001)</div>
  <div class="csl-entry">Book Y (2002)</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Warren Smith (2000)</div>
  <div class="csl-entry">----- (2001)</div>
  <div class="csl-entry">Book Y (2002)</div>
</div>'

Failure → citeproc test test-suite name_AfterInvertedName.txt
Passed in:
(string) 'DOEBUCK, Jonathan et al.; DOE, John et al.; DOE, John et al.
APPLEBY, Aloysius, and Bobby BROWN; APPLEBY, Aloysius et al.; APPLEBY, Aloysius et al.'
Expected:
(string) 'DOEBUCK, Jonathan, et al.; DOE, John, Jane ROE et al.; DOE, John, Janice ROEBUCK et al.
APPLEBY, Aloysius, and Bobby BROWN; APPLEBY, Aloysius, Bobby BROWN and Cecile CREAM; APPLEBY, Aloysius, Bobby BROWN and Enola EVERGREEN'

Failure → citeproc test test-suite name_CiteGroupDelimiterWithYearCollapse.txt
Passed in:
(string) '(Aalto 2015; Aalto 2015)'
Expected:
(string) '(Aalto 2015a 2015b)'

Failure → citeproc test test-suite name_CiteGroupDelimiterWithYearSuffixCollapse.txt
Passed in:
(string) '(Aalto 2015; Aalto 2015)'
Expected:
(string) '(Aalto 2015a, b)'

Failure → citeproc test test-suite name_CiteGroupDelimiterWithYearSuffixCollapse2.txt
Passed in:
(string) '(Aalto 2015; Aalto 2015; Bartleby 2010; Aalto 2015; Aalto 2015; Aalto 2015)'
Expected:
(string) '(Aalto 2015a,b; Bartleby 2010; Aalto 2015c–e)'

Failure → citeproc test test-suite name_CiteGroupDelimiterWithYearSuffixCollapse3.txt
Passed in:
(string) '(Aalto 2015; Aalto 2015; Bartleby 2010)'
Expected:
(string) '(Aalto 2015a,b; Bartleby 2010)'

Failure → citeproc test test-suite name_CollapseRoleLabels.txt
Passed in:
(string) 'Albert Asthma et al. (eds.), Albert Asthma et al. (trans.)'
Expected:
(string) 'Albert Asthma et al. (eds. &#38; trans.)'

Failure → citeproc test test-suite name_EditorTranslatorSameWithTerm.txt
Passed in:
(string) 'John Doe (ed.), John Doe (tran.)'
Expected:
(string) 'John Doe (ed. &#38; tran.)'

Failure → citeproc test test-suite name_HebrewAnd.txt
Passed in:
(string) 'תפוח ו  תפוז'
Expected:
(string) 'תפוחו תפוז'

Failure → citeproc test test-suite name_InTextMarkupInitialize.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><b>Doe</b>, <b>John</b> Q.</div>
  <div class="csl-entry"><b>Doe</b>, <b>John</b>-Q.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><b>Doe</b>, <b>J.</b> Q.</div>
  <div class="csl-entry"><b>Doe</b>, <b>J.</b>-Q.</div>
</div>'

Failure → citeproc test test-suite name_InTextMarkupNormalizeInitials.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><b>Doe</b>, <b>J</b> Q.</div>
  <div class="csl-entry"><b>Doe</b>, <b>J</b>-Q.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><b>Doe</b>, <b>J.</b> Q.</div>
  <div class="csl-entry"><b>Doe</b>, <b>J.</b>-Q.</div>
</div>'

Failure → citeproc test test-suite name_SubsequentAuthorSubstituteMultipleNames.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Bumke, Courtly Culture: Literature and Society in the High Middle Ages, Dunlap tran.</div>
  <div class="csl-entry">Bumke, Höfische</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Bumke, Courtly Culture: Literature and Society in the High Middle Ages, Dunlap tran.</div>
  <div class="csl-entry">-----, Höfische</div>
</div>'

Failure → citeproc test test-suite name_SubsequentAuthorSubstituteSingleField.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Yomiuri Shinbun.</div>
  <div class="csl-entry">Yomiuri Shinbun.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Yomiuri Shinbun.</div>
  <div class="csl-entry">———.</div>
</div>'

Failure → citeproc test test-suite name_SubstitutePartialEach.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Title One</div>
  <div class="csl-entry">Title One</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Title One</div>
  <div class="csl-entry">---</div>
</div>'

Failure → citeproc test test-suite name_WithNonBreakingSpace.txt
Passed in:
(string) 'John  Doe'
Expected:
(string) 'John Doe'

Failure → citeproc test test-suite number_PlainHyphenOrEnDashAlwaysPlural.txt
Passed in:
(string) 'His Anonymous Life (1) pages 1–2 (cs:text) vs His Anonymous Life (1) pages 1–2 (cs:number); His Anonymous Life (2) pages i–ix (cs:text) vs His Anonymous Life (2) pages i–ix (cs:number); His Anonymous Life (3) page 3-B (cs:text) vs His Anonymous Life (3) page 3-B (cs:number); His Anonymous Life (4) pages Michaelson–Morely (cs:text) vs His Anonymous Life (4) pages Michaelson–Morely (cs:number)'
Expected:
(string) 'His Anonymous Life (1) pages 1–2 (cs:text) vs His Anonymous Life (1) pages 1–2 (cs:number); His Anonymous Life (2) pages i–ix (cs:text) vs His Anonymous Life (2) pages i–ix (cs:number); His Anonymous Life (3) page 3-B (cs:text) vs His Anonymous Life (3) page 3-B (cs:number); His Anonymous Life (4) page Michaelson-Morely (cs:text) vs His Anonymous Life (4) page Michaelson-Morely (cs:number)'

Failure → citeproc test test-suite position_IbidWithPrefixFullStop.txt
Passed in:
(string) '>>[0] Book A; . He said “Please work.” ibid.'
Expected:
(string) '>>[0] Book A. He said “Please work.” Ibid.'

Failure → citeproc test test-suite position_ResetNoteNumbers.txt
Passed in:
(string) '..[0] Book A (note 1)
..[1] Book C (note 1)
..[2] ibid (note 2)
..[3] Book A, n 1 (note 2)
..[4] Book C, n 1 (note 3)
..[5] Book A, n 1 (note 3)
..[6] Book C, n 1 (note 4)
>>[7] Book A, n 1 (note 5)'
Expected:
(string) '..[0] Book A (note 1)
..[1] Book C (note 1)
..[2] Book A, n 1 (note 2)
..[3] ibid (note 2)
..[4] Book C, n 1 (note 3)
..[5] Book A, n 1 (note 3)
..[6] Book C, n 1 (note 4)
>>[7] Book A, n 1 (note 5)'

Failure → citeproc test test-suite punctuation_DefaultYearSuffixDelimiter.txt
Passed in:
(string) '(Aalto 2000; Aalto 2000; Aalto 2000)'
Expected:
(string) '(Aalto 2000a; b; c)'

Failure → citeproc test test-suite punctuation_FrenchOrthography.txt
Passed in:
(string) 'His “ Anonymous ” Life'
Expected:
(string) 'His « Anonymous » Life'

Failure → citeproc test test-suite punctuation_FullMontyField.txt
Passed in:
(string) 'ENDING IN COLON
colon:: colon
period.: colon
semicolon;: colon
exclamation!: colon
question?: colon
comma,: colon

ENDING IN PERIOD
colon:. period
period. period
semicolon;. period
exclamation!. period
question?. period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon;; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon:! exclamation
period.! exclamation
semicolon;! exclamation
exclamation!! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon:? question
period.? question
semicolon;? question
exclamation!? question
question?? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'
Expected:
(string) 'ENDING IN COLON
colon: colon
period.: colon
semicolon; colon
exclamation! colon
question? colon
comma,: colon

ENDING IN PERIOD
colon: period
period. period
semicolon; period
exclamation! period
question? period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon! exclamation
period.! exclamation
semicolon! exclamation
exclamation! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon? question
period.? question
semicolon? question
exclamation!? question
question? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'

Failure → citeproc test test-suite punctuation_FullMontyPlain.txt
Passed in:
(string) 'ENDING IN COLON
colon:: colon
period.: colon
semicolon;: colon
exclamation!: colon
question?: colon
comma,: colon

ENDING IN PERIOD
colon:. period
period. period
semicolon;. period
exclamation!. period
question?. period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon;; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon:! exclamation
period.! exclamation
semicolon;! exclamation
exclamation!! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon:? question
period.? question
semicolon;? question
exclamation!? question
question?? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'
Expected:
(string) 'ENDING IN COLON
colon: colon
period.: colon
semicolon; colon
exclamation! colon
question? colon
comma,: colon

ENDING IN PERIOD
colon: period
period. period
semicolon; period
exclamation! period
question? period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon! exclamation
period.! exclamation
semicolon! exclamation
exclamation! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon? question
period.? question
semicolon? question
exclamation!? question
question? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'

Failure → citeproc test test-suite punctuation_FullMontyQuotesIn.txt
Passed in:
(string) 'ENDING IN COLON
“colon”:: colon
“period.”: colon
“semicolon;”: colon
“exclamation”!: colon
“question?”: colon
“comma,”: colon

ENDING IN PERIOD
“colon”:. period
“period.” period
“semicolon;”. period
“exclamation”!. period
“question?”. period
“comma,”. period

ENDING IN SEMICOLON
“colon”:; semicolon
“period.”; semicolon
“semicolon;”; semicolon
“exclamation”!; semicolon
“question?”; semicolon
“comma,”; semicolon

ENDING IN EXCLAMATION
“colon”:! exclamation
“period.”! exclamation
“semicolon;”! exclamation
“exclamation”!! exclamation
“question?”! exclamation
“comma,”! exclamation

ENDING IN QUESTION
“colon”:? question
“period.”? question
“semicolon;”? question
“exclamation”!? question
“question?”? question
“comma,”? question

ENDING IN COMMA
“colon”:, comma
“period.”, comma
“semicolon;”, comma
“exclamation”!, comma
“question?”, comma
“comma,” comma'
Expected:
(string) 'ENDING IN COLON
“colon”: colon
“period.”: colon
“semicolon”; colon
“exclamation!” colon
“question?” colon
“comma,”: colon

ENDING IN PERIOD
“colon”: period
“period.” period
“semicolon”; period
“exclamation!” period
“question?” period
“comma,.” period

ENDING IN SEMICOLON
“colon”:; semicolon
“period.”; semicolon
“semicolon”; semicolon
“exclamation!”; semicolon
“question?”; semicolon
“comma,”; semicolon

ENDING IN EXCLAMATION
“colon!” exclamation
“period.!” exclamation
“semicolon!” exclamation
“exclamation!” exclamation
“question?!” exclamation
“comma,!” exclamation

ENDING IN QUESTION
“colon?” question
“period.?” question
“semicolon?” question
“exclamation!?” question
“question?” question
“comma,?” question

ENDING IN COMMA
“colon”:, comma
“period.,” comma
“semicolon”;, comma
“exclamation!,” comma
“question?,” comma
“comma,” comma'

Failure → citeproc test test-suite punctuation_FullMontyQuotesOut.txt
Passed in:
(string) 'ENDING IN COLON
“colon”:: colon
“period”.: colon
“semicolon”;: colon
“exclamation”!: colon
“question”?: colon
“comma”,: colon

ENDING IN PERIOD
“colon”:. period
“period”. period
“semicolon”;. period
“exclamation”!. period
“question”?. period
“comma”,. period

ENDING IN SEMICOLON
“colon”:; semicolon
“period”.; semicolon
“semicolon”;; semicolon
“exclamation”!; semicolon
“question”?; semicolon
“comma”,; semicolon

ENDING IN EXCLAMATION
“colon”:! exclamation
“period”.! exclamation
“semicolon”;! exclamation
“exclamation”!! exclamation
“question”?! exclamation
“comma”,! exclamation

ENDING IN QUESTION
“colon”:? question
“period”.? question
“semicolon”;? question
“exclamation”!? question
“question”?? question
“comma”,? question

ENDING IN COMMA
“colon”:, comma
“period”., comma
“semicolon”;, comma
“exclamation”!, comma
“question”?, comma
“comma”, comma'
Expected:
(string) 'ENDING IN COLON
“colon”: colon
“period”.: colon
“semicolon”; colon
“exclamation”! colon
“question”? colon
“comma”,: colon

ENDING IN PERIOD
“colon”: period
“period”. period
“semicolon”; period
“exclamation”! period
“question”? period
“comma”,. period

ENDING IN SEMICOLON
“colon”:; semicolon
“period”.; semicolon
“semicolon”; semicolon
“exclamation”!; semicolon
“question”?; semicolon
“comma”,; semicolon

ENDING IN EXCLAMATION
“colon”! exclamation
“period”.! exclamation
“semicolon”! exclamation
“exclamation”! exclamation
“question”?! exclamation
“comma”,! exclamation

ENDING IN QUESTION
“colon”? question
“period”.? question
“semicolon”? question
“exclamation”!? question
“question”? question
“comma”,? question

ENDING IN COMMA
“colon”:, comma
“period”., comma
“semicolon”;, comma
“exclamation”!, comma
“question”?, comma
“comma”, comma'

Failure → citeproc test test-suite punctuation_SuppressPrefixPeriodForDelimiterSemicolon.txt
Passed in:
(string) '..[0] John Doe, “His Anonymous Life,” 1965; Jane Roe, “Her Anonymous Life,” 1965.
>>[1] Doe, “His Anonymous Life;” Roe, “Her Anonymous Life.”'
Expected:
(string) '..[0] John Doe, “His Anonymous Life,” 1965; Jane Roe, “Her Anonymous Life,” 1965.
>>[1] Doe, “His Anonymous Life”; Roe, “Her Anonymous Life.”'

Failure → citeproc test test-suite simplespace_case1.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, J., 1992. In <i>Some title</i>.  Vintage, pp. 250–300.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, J., 1992. In <i>Some title</i>. Vintage, pp. 250–300.</div>
</div>'

Failure → citeproc test test-suite sort_AguStyle.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Smith, A. (1989)</div>
  <div class="csl-entry">Smith, A. (1989)</div>
  <div class="csl-entry">Smith, A. (1991)</div>
  <div class="csl-entry">Smith, A. and C. Allen (1992)</div>
  <div class="csl-entry">Smith, A. and B. Frank (1995)</div>
  <div class="csl-entry">Smith, A. and B. Frank (1997)</div>
  <div class="csl-entry">Smith, A., L. Roberts, and T. Jones (1993)</div>
  <div class="csl-entry">Smith, A., T. Jones, and L. Roberts (1997)</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Smith, A. (1989a)</div>
  <div class="csl-entry">Smith, A. (1989b)</div>
  <div class="csl-entry">Smith, A. (1991)</div>
  <div class="csl-entry">Smith, A. and C. Allen (1992)</div>
  <div class="csl-entry">Smith, A. and B. Frank (1995)</div>
  <div class="csl-entry">Smith, A. and B. Frank (1997)</div>
  <div class="csl-entry">Smith, A., L. Roberts, and T. Jones (1993)</div>
  <div class="csl-entry">Smith, A., T. Jones, and L. Roberts (1997)</div>
</div>'

Failure → citeproc test test-suite sort_AguStyleReverseGroups.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Smith, A., L. Roberts, and T. Jones (1993)</div>
  <div class="csl-entry">Smith, A., T. Jones, and L. Roberts (1997)</div>
  <div class="csl-entry">Smith, A. and C. Allen (2000)</div>
  <div class="csl-entry">Smith, A. and B. Frank (1995)</div>
  <div class="csl-entry">Smith, A. and B. Frank (1997)</div>
  <div class="csl-entry">Smith, A. (1989)</div>
  <div class="csl-entry">Smith, A. (1989)</div>
  <div class="csl-entry">Smith, A. (1991)</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Smith, A., L. Roberts, and T. Jones (1993)</div>
  <div class="csl-entry">Smith, A., T. Jones, and L. Roberts (1997)</div>
  <div class="csl-entry">Smith, A. and C. Allen (2000)</div>
  <div class="csl-entry">Smith, A. and B. Frank (1995)</div>
  <div class="csl-entry">Smith, A. and B. Frank (1997)</div>
  <div class="csl-entry">Smith, A. (1989a)</div>
  <div class="csl-entry">Smith, A. (1989b)</div>
  <div class="csl-entry">Smith, A. (1991)</div>
</div>'

Failure → citeproc test test-suite sort_AuthorDateWithYearSuffix.txt
Passed in:
(string) '>>[0] (Day and Fitzpatrick, 2005; Mian et al., 2005; Day and Fitzpatrick, 2005)'
Expected:
(string) '>>[0] (Day and Fitzpatrick, 2005a, 2005b; Mian et al., 2005)'

Failure → citeproc test test-suite sort_BibliographyCitationNumberDescendingViaCompositeMacro.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[1] Aaaa</div>
  <div class="csl-entry">[2] Bbbb</div>
  <div class="csl-entry">[3] Xxxx</div>
  <div class="csl-entry">[4] Zzzz</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[4] Aaaa</div>
  <div class="csl-entry">[3] Bbbb</div>
  <div class="csl-entry">[2] Xxxx</div>
  <div class="csl-entry">[1] Zzzz</div>
</div>'

Failure → citeproc test test-suite sort_BibliographyCitationNumberDescendingViaMacro.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[1] Book One</div>
  <div class="csl-entry">[2] Book Three</div>
  <div class="csl-entry">[3] Book Four</div>
  <div class="csl-entry">[4] Book Six</div>
  <div class="csl-entry">[5] Book Two</div>
  <div class="csl-entry">[6] Book Five</div>
  <div class="csl-entry">[7] Book Seven</div>
  <div class="csl-entry">[8] Book Eight</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[8] Book One</div>
  <div class="csl-entry">[7] Book Three</div>
  <div class="csl-entry">[6] Book Four</div>
  <div class="csl-entry">[5] Book Six</div>
  <div class="csl-entry">[4] Book Two</div>
  <div class="csl-entry">[3] Book Five</div>
  <div class="csl-entry">[2] Book Seven</div>
  <div class="csl-entry">[1] Book Eight</div>
</div>'

Failure → citeproc test test-suite sort_CitationNumberPrimaryDescendingViaMacroBibliography.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[1] Xxxx (fourth-cited)</div>
  <div class="csl-entry">[2] Zzzz (third-cited)</div>
  <div class="csl-entry">[3] Bbbb (second-cited)</div>
  <div class="csl-entry">[4] Aaaa (first-cited)</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[4] Xxxx (fourth-cited)</div>
  <div class="csl-entry">[3] Zzzz (third-cited)</div>
  <div class="csl-entry">[2] Bbbb (second-cited)</div>
  <div class="csl-entry">[1] Aaaa (first-cited)</div>
</div>'

Failure → citeproc test test-suite sort_CitationNumberPrimaryDescendingViaMacroCitation.txt
Passed in:
(string) '>>[0] [1] Xxxx (fourth-cited); [2] Zzzz (third-cited); [3] Bbbb (second-cited); [4] Aaaa (first-cited)'
Expected:
(string) '>>[0] [1] Aaaa (first-cited); [2] Bbbb (second-cited); [3] Zzzz (third-cited); [4] Xxxx (fourth-cited)'

Failure → citeproc test test-suite sort_CitationNumberPrimaryDescendingViaVariableBibliography.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[1] Xxxx (fourth-cited)</div>
  <div class="csl-entry">[2] Zzzz (third-cited)</div>
  <div class="csl-entry">[3] Bbbb (second-cited)</div>
  <div class="csl-entry">[4] Aaaa (first-cited)</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[4] Xxxx (fourth-cited)</div>
  <div class="csl-entry">[3] Zzzz (third-cited)</div>
  <div class="csl-entry">[2] Bbbb (second-cited)</div>
  <div class="csl-entry">[1] Aaaa (first-cited)</div>
</div>'

Failure → citeproc test test-suite sort_CitationNumberPrimaryDescendingViaVariableCitation.txt
Passed in:
(string) '>>[0] [1] Xxxx (fourth-cited); [2] Zzzz (third-cited); [3] Bbbb (second-cited); [4] Aaaa (first-cited)'
Expected:
(string) '>>[0] [1] Aaaa (first-cited); [2] Bbbb (second-cited); [3] Zzzz (third-cited); [4] Xxxx (fourth-cited)'

Failure → citeproc test test-suite sort_CiteGroupDelimiter.txt
Passed in:
(string) 'Banda 1999; Aalto 2000; Aalto 2001'
Expected:
(string) 'Banda 1999; Aalto 2000, Aalto 2001'

Failure → citeproc test test-suite sort_DaleDalebout.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Allabout</div>
  <div class="csl-entry">Dalebout</div>
  <div class="csl-entry">Dale</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Allabout</div>
  <div class="csl-entry">Dale</div>
  <div class="csl-entry">Dalebout</div>
</div>'

Failure → citeproc test test-suite sort_DropNameLabelInSort.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John ed. <i>Hello</i>.</div>
  <div class="csl-entry">Doe, John. <i>Hello</i>.</div>
  <div class="csl-entry">Doe, John Eamon. <i>Hello</i>.</div>
  <div class="csl-entry">Doe, John Egbert. <i>Hello</i>.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John ed. <i>Hello</i>.</div>
  <div class="csl-entry">---. <i>Hello</i>.</div>
  <div class="csl-entry">Doe, John Eamon. <i>Hello</i>.</div>
  <div class="csl-entry">Doe, John Egbert. <i>Hello</i>.</div>
</div>'

Failure → citeproc test test-suite sort_GroupedByAuthorstring.txt
Passed in:
(string) '>>[0] Smith 2003; Jones 2005; Smith 2010'
Expected:
(string) '>>[0] Smith 2003, 2010; Jones 2005'

Failure → citeproc test test-suite sort_LeadingApostropheOnNameParticle.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">’t Horvath, P A A</div>
  <div class="csl-entry">’t Horvath, P A C</div>
  <div class="csl-entry">d’Wander, W</div>
  <div class="csl-entry">de’Frinkle, B</div>
  <div class="csl-entry">in ’t Horvath, P A B</div>
  <div class="csl-entry">in ’t Horvath, P A D</div>
  <div class="csl-entry">Klabdaggit, M</div>
  <div class="csl-entry">Vooz, B</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">d’Wander, W</div>
  <div class="csl-entry">de’ Frinkle, B</div>
  <div class="csl-entry">in ’t Horvath, P A B</div>
  <div class="csl-entry">in ’t Horvath, P A D</div>
  <div class="csl-entry">Klabdaggit, M</div>
  <div class="csl-entry">’t Horvath, P A A</div>
  <div class="csl-entry">’t Horvath, P A C</div>
  <div class="csl-entry">Vooz, B</div>
</div>'

Failure → citeproc test test-suite sort_NameImplicitSortOrderAndForm.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, Book B</div>
  <div class="csl-entry">Doe, Book C</div>
  <div class="csl-entry">Roe, Book A</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, Book C</div>
  <div class="csl-entry">Doe, Book B</div>
  <div class="csl-entry">Roe, Book A</div>
</div>'

Failure → citeproc test test-suite sort_RangeUnaffected.txt
Passed in:
(string) '>>[0] <sup>3</sup>
..[1] <sup>1,2,3</sup>'
Expected:
(string) '>>[0] <sup>1</sup>
>>[1] <sup>1–3</sup>'

Failure → citeproc test test-suite sort_SeparateAuthorsAndOthers.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. <i>Hello 4</i>.</div>
  <div class="csl-entry">Doe, John ed. <i>Hello 1</i>.</div>
  <div class="csl-entry">Doe, John Barbitol. <i>Hello 2</i>.</div>
  <div class="csl-entry">Doe, John Egbert. <i>Hello 3</i>.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. <i>Hello 4</i>.</div>
  <div class="csl-entry">--- ed. <i>Hello 1</i>.</div>
  <div class="csl-entry">Doe, John Barbitol. <i>Hello 2</i>.</div>
  <div class="csl-entry">Doe, John Egbert. <i>Hello 3</i>.</div>
</div>'

Failure → citeproc test test-suite sort_VariousNameMacros3.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe Jane B. &#38; Doe John A. (2009). Title 1. <i>Test</i> <b>1,</b> 1–2.</div>
  <div class="csl-entry">Doe John A. &#38; Bloggs Joe A. (2011). Title 3. <i>Test</i> <b>3,</b> 3–4.</div>
  <div class="csl-entry">Doe John A. &#38; Smith John A. (2010). Title 2. <i>Test</i> <b>2,</b> 1–2.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe John A. &#38; Bloggs Joe A. (2011). Title 3. <i>Test</i> <b>3,</b> 3–4.</div>
  <div class="csl-entry">Doe Jane B. &#38; Doe John A. (2009). Title 1. <i>Test</i> <b>1,</b> 1–2.</div>
  <div class="csl-entry">Doe John A. &#38; Smith John A. (2010). Title 2. <i>Test</i> <b>2,</b> 1–2.</div>
</div>'

Failure → citeproc test test-suite sort_WithAndInOneEntry.txt
Passed in:
(string) '(Beck 1991; Beck, Katz, and Tucker 1998; Beck, King, and Zeng 2000; Beck and Katz 2001; Beck and Katz 2011; Colaresi 2006; Colaresi, Rasler, and Thompson 2007; Colaresi and Thompson 2002; Gochman 1993; Gochman and Leng 1983; Gochman and Maoz 1984)'
Expected:
(string) '(Beck 1991; Beck and Katz 2001, 2011; Beck, Katz, and Tucker 1998; Beck, King, and Zeng 2000; Colaresi 2006; Colaresi, Rasler, and Thompson 2007; Colaresi and Thompson 2002; Gochman 1993; Gochman and Leng 1983; Gochman and Maoz 1984)'

Failure → citeproc test test-suite substitute_SharedMacro.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Alan Alto Inc.: Book Three.</div>
  <div class="csl-entry">Alan Alto Inc.: Book Four.</div>
  <div class="csl-entry">Alto, Alan: Book One.</div>
  <div class="csl-entry">Alto, Alan: Book Two.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Alan Alto Inc.: Book Three.</div>
  <div class="csl-entry">---: Book Four.</div>
  <div class="csl-entry">Alto, Alan: Book One.</div>
  <div class="csl-entry">---: Book Two.</div>
</div>'

Failure → citeproc test test-suite textcase_RepeatedTitleBug.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Jenrich, R. I., &#38; Bentler, P. M.  (2012). Exploratory bi-factor analysis: The oblique case. <i>Psychometrika</i>, <i>77</i>(3), 442–454. https://doi.org/https://doi.org/10.1007/s11336-012-9269-1</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Jenrich, R. I., &#38; Bentler, P. M. (2012). Exploratory bi-factor analysis: The oblique case. <i>Psychometrika</i>, <i>77</i>(3), 442–454. https://doi.org/https://doi.org/10.1007/s11336-012-9269-1</div>
</div>'

Failure → citeproc test test-suite variables_ContainerTitleShort.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. In: Container: a title. (Series: a title). </div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. Container. </div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. In: Container: a title. (Series: a title).</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. Container.</div>
  </div>
</div>'

Failure → citeproc test test-suite variables_ContainerTitleShort2.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. In  p. 25. </div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. Container. :25. </div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. In: Container: a title. p. 25. (Series: a title).</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. Container. :25.</div>
  </div>
</div>'

Error → citeproc test test-suite bugreports_AsmJournals.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite bugreports_UndefinedInName.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite bugreports_undefinedCrash.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_FailWithYearSuffix.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_YearSuffixFiftyTwoEntries.txt
./citeproc/citeproc-engine.lua:361: attempt to get length of a nil value (local 'previous_note_citations')

Error → citeproc test test-suite disambiguate_YearSuffixFiftyTwoEntriesByCite.txt
./citeproc/citeproc-engine.lua:361: attempt to get length of a nil value (local 'previous_note_citations')

Error → citeproc test test-suite disambiguate_YearSuffixMidInsert.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite group_ComplexNesting.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite magic_SubsequentAuthorSubstituteNotFooled.txt
./citeproc/citeproc-node-sort.lua:98: attempt to compare number with string

Error → citeproc test test-suite name_EtAlWithCombined.txt
./citeproc/citeproc-node-choose.lua:161: attempt to index a nil value (field 'cite')

Error → citeproc test test-suite position_IbidWithSuffix.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite sort_CaseInsensitiveBibliography.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite sort_ChicagoYearSuffix1.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite sort_ChicagoYearSuffix2.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite sort_FamilyOnly.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite sort_LeadingA.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite testers_FirstAutoGeneratedZoteroPluginTest.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)

Error → citeproc test test-suite testers_SecondAutoGeneratedZoteroPluginTest.txt
./citeproc/citeproc-node-names.lua:635: bad argument #1 to 'gsub' (string expected, got nil)
