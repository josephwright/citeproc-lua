category       success failure   error pending
-------------- ------- ------- ------- -------
affix                7       1       1       0
bugreports          23      13      46       0
collapse             3      15       3       0
condition           16       0       1       0
date                84      12       5       0
decorations          6       1       0       0
disambiguate        14      39      18       0
display              2       2       1       0
etal                 2       0       2       0
flipflop            13       5       1       0
form                 3       0       0       0
fullstyles           0       0       5       0
group                4       1       2       0
integration          6       5       3       0
label               15       2       2       0
locale              23       0       0       0
locator              4       1       0       0
magic               31       5       4       0
name                85      16      10       0
nameattr            97       0       0       0
nameorder            6       0       0       0
namespaces           1       0       0       0
number              16       2       2       0
page                 9       0       0       0
plural               7       0       0       0
position            10       4       2       0
punctuation          8       5       3       0
quotes               2       0       2       0
simplespace          0       0       1       0
sort                 5      11      50       0
sortseparator        1       0       0       0
substitute           6       0       1       0
testers              0       0       2       0
textcase            25       4       1       0
unicode              1       0       0       0
variables            3       2       0       0
virtual              1       0       0       0
-------------- ------- ------- ------- -------
(all)              539     146     168       0

Failure → citeproc test test-suite affix_CommaAfterQuote.txt
Passed in:
(string) '“quote,” Hello Thing'
Expected:
(string) '“quote”, Hello Thing'

Failure → citeproc test test-suite bugreports_ApostropheOnParticle.txt
Passed in:
(string) 'John d’ Jones'
Expected:
(string) 'John d’Jones'

Failure → citeproc test test-suite bugreports_AutomaticallyDeleteItemsFails.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> J. Doe, <i>Book A</i>, 2000</div>
    .</div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> J. Doe, <i>Book B</i>, 2000</div>
    .</div>
  <div class="csl-entry">
    <div class="csl-left-margin">[3]</div><div class="csl-right-inline"> R. Snoakes, <i>Book C</i>, 2000</div>
    .</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> J. Doe, <i>Book A</i>, 2000.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> J. Doe, <i>Book B</i>, 2000.</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_BadCitationUpdate.txt
Passed in:
(string) 'C. Grignon, C. Sentenac 2000
C. Grignon, C. Sentenac 2000'
Expected:
(string) 'C. Grignon, C. Sentenac 2000a
C. Grignon, C. Sentenac 2000b'

Failure → citeproc test test-suite bugreports_CitationSortsWithEtAl.txt
Passed in:
(string) '[<i>Aalto et al.</i>, 2001; <i>Aalto et al.</i>, 1999; <i>Aalto et al.</i>, 2000]'
Expected:
(string) '[<i>Aalto et al.</i>, 1999, 2000, 2001]'

Failure → citeproc test test-suite bugreports_DelimiterOnLayout.txt
Passed in:
(string) '>>[0] (Fig.1(z)Fig.2)'
Expected:
(string) '>>[0] (fig.1(z)fig.2)'

Failure → citeproc test test-suite bugreports_DuplicateSpaces.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> B. D’Arcus, <i>Boundaries of Dissent: Protest and State Power in the Media Age</i>,  New York: Routledge, 2006</div>
    .</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> B. D’Arcus, <i>Boundaries of Dissent: Protest and State Power in the Media Age</i>, New York: Routledge, 2006.</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_EnvAndUrb.txt
Passed in:
(string) '..[0] Baines, T S, O Benedettini and J M Kay, ‘Title One’; Baines, T S, F Gump and J M Kay, ‘Title Two’.
..[1] See reference 1, Baines et al., ‘Title One’.
>>[2] See reference 1, Baines et al., ‘Title Two’.'
Expected:
(string) '>>[0] Baines, T S, O Benedettini and J M Kay, ‘Title One’; Baines, T S, F Gump and J M Kay, ‘Title Two’.
..[1] See reference 1, Baines et al.
>>[2] See reference 1, Baines et al.'

Failure → citeproc test test-suite bugreports_EtAlSubsequent.txt
Passed in:
(string) '..[0] John Doe, Jane Roe, Katie Harper, Emmanuel Clutterbuck
>>[1] John Doe, Jane Roe, Katie Harper, Emmanuel Clutterbuck'
Expected:
(string) '..[0] John Doe, Jane Roe, Katie Harper, Emmanuel Clutterbuck
>>[1] John Doe et al.'

Failure → citeproc test test-suite bugreports_FrenchApostrophe.txt
Passed in:
(string) '« Life“s ”Little’ Surprises »'
Expected:
(string) '« Life’s “Little” Surprises »'

Failure → citeproc test test-suite bugreports_IeeePunctuation.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> P.G. Zimbardo, “Does Psychology make a significant difference in our lives?,” <i>American Psychologist</i>,  vol. 59, Jan. 2004, pp. 339–351</div>
    .</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> P.G. Zimbardo, “Does Psychology make a significant difference in our lives?,” <i>American Psychologist</i>, vol. 59, Jan. 2004, pp. 339–351.</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_LegislationCrash.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><i>Arrêté du 23 mars 1992 relatif au programme des études conduisant au diplôme d’État d’infirmier</i>, 1992. 23 mars 1992</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><i>Arrêté du 23 mars 1992 relatif au programme des études conduisant au diplôme d’État d’infirmier</i>, 1992. </div>
</div>'

Failure → citeproc test test-suite bugreports_UndefinedInName3.txt
Passed in:
(string) 'B-X Kim and A-Y Kim, p. .
Kim and Kim, 23.'
Expected:
(string) 'B-X Kim and A-Y Kim.
Kim and Kim, 23.'

Failure → citeproc test test-suite bugreports_parseName.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">van Happel, Eduard 2008</div>
  <div class="csl-entry">von Hoppel, Gustav 2008</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">van Happel, Eduard 2008</div>
  <div class="csl-entry">Hoppel, Gustav von 2008</div>
</div>'

Failure → citeproc test test-suite collapse_AuthorCollapse.txt
Passed in:
(string) '(Smith 1900, Smith 2000)'
Expected:
(string) '(Smith 1900, 2000)'

Failure → citeproc test test-suite collapse_AuthorCollapseNoDate.txt
Passed in:
(string) '(Smith, Smith 1900, Smith 2000)'
Expected:
(string) '(Smith, 1900, 2000)'

Failure → citeproc test test-suite collapse_AuthorCollapseNoDateSorted.txt
Passed in:
(string) '(Smith 325AD, Smith 2000, Smith)'
Expected:
(string) '(Smith 325AD, 2000)'

Failure → citeproc test test-suite collapse_CitationNumberRangesInsert.txt
Passed in:
(string) '..[0] [4]
>>[1] [1], [2], [3], [4]'
Expected:
(string) '..[0] [1]
>>[1] [1]–[4]'

Failure → citeproc test test-suite collapse_CitationNumberRangesMixed.txt
Passed in:
(string) '([1], [2], [3], [4], [5], [6], [7])
([1], [2], [3], [5], [6], [7])'
Expected:
(string) '([1]–[7])
([1]–[3], [5]–[7])'

Failure → citeproc test test-suite collapse_CitationNumberRangesMixed2.txt
Passed in:
(string) '([1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11])
([1], [3], [4], [5], [7], [9], [10], [11])'
Expected:
(string) '([1]–[11])
([1], [3]–[5], [7], [9]–[11])'

Failure → citeproc test test-suite collapse_CitationNumberRangesMixed3.txt
Passed in:
(string) '([1], [2], [3], [4], [5], [6], [7], [8])
([1], [4], [6], [7], [8])'
Expected:
(string) '([1]–[8])
([1], [4], [6]–[8])'

Failure → citeproc test test-suite collapse_CitationNumberRangesWithAffixes.txt
Passed in:
(string) '<b>([1],[2],[3])</b>'
Expected:
(string) '<b>([1]–[3])</b>'

Failure → citeproc test test-suite collapse_NumericDuplicate.txt
Passed in:
(string) '(1,2,2,3,4)'
Expected:
(string) '(1,2,2–4)'

Failure → citeproc test test-suite collapse_NumericDuplicate2.txt
Passed in:
(string) '(1,2,3,3,4,5)'
Expected:
(string) '(1–3,3–5)'

Failure → citeproc test test-suite collapse_TrailingDelimiter.txt
Passed in:
(string) '(Condit et al. 2000, Condit et al. 1995, Connell 1971, Condit et al. 1998, Cortes &#38; Hunziker 1971)'
Expected:
(string) '(Condit et al. 2000, 1995, 1998; Connell 1971, Cortes &#38; Hunziker 1971)'

Failure → citeproc test test-suite collapse_YearSuffixCollapse.txt
Passed in:
(string) 'Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2001
Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2001'
Expected:
(string) 'Smith 2000a–e, 2001
Smith 2000a,c–e, 2001'

Failure → citeproc test test-suite collapse_YearSuffixCollapseNoRange.txt
Passed in:
(string) 'Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2001
Smith 2000, Smith 2000, Smith 2000, Smith 2000, Smith 2001'
Expected:
(string) 'Smith 2000a,b,c,d,e, 2001
Smith 2000a,c,d,e, 2001'

Failure → citeproc test test-suite collapse_YearSuffixCollapseNoYearSuffixDelimiter.txt
Passed in:
(string) 'Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2001
Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2001'
Expected:
(string) 'Smith 2000a–e;2001
Smith 2000a;c–e;2001'

Failure → citeproc test test-suite collapse_YearSuffixImplicitCollapseNoYearSuffixDelimiter.txt
Passed in:
(string) 'Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2001
Smith 2000;Smith 2000;Smith 2000;Smith 2000;Smith 2001'
Expected:
(string) 'Smith 2000a–e;2001
Smith 2000a;c–e;2001'

Failure → citeproc test test-suite date_IgnoreNonexistentSort.txt
Passed in:
(string) 'Item 1; Item 2; Item 3; Item 4'
Expected:
(string) 'Item 4; Item 2; Item 1; Item 3'

Failure → citeproc test test-suite date_LopsidedDataYearSuffixCollapse.txt
Passed in:
(string) '(Smith 1982, Smith 1982)'
Expected:
(string) '(Smith 1982a,b)'

Failure → citeproc test test-suite date_NegativeDateSort.txt
Passed in:
(string) '100BC713, 54AD1013, 44BC315, 68AD611'
Expected:
(string) '100BC-7-13, 44BC-3-15, 54AD-10-13, 68AD-6-11'

Failure → citeproc test test-suite date_NegativeDateSortViaMacro.txt
Passed in:
(string) '100BC713, 54AD1013, 44BC315, 68AD611'
Expected:
(string) '100BC-7-13, 44BC-3-15, 54AD-10-13, 68AD-6-11'

Failure → citeproc test test-suite date_NegativeDateSortViaMacroOnYearMonthOnly.txt
Passed in:
(string) 'BookY (100BC713), BookX (100BC714), BookB (68AD315), BookA (68AD316)'
Expected:
(string) 'BookX (100BC-7-14), BookY (100BC-7-13), BookA (68AD-3-16), BookB (68AD-3-15)'

Failure → citeproc test test-suite date_NonexistentSortReverseCitation.txt
Passed in:
(string) 'Item 1; Item 2; Item 3; Item 4'
Expected:
(string) 'Item 2; Item 4; Item 1; Item 3'

Failure → citeproc test test-suite date_RangeDelimiter.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Year, Month, Day, with repeated month and year: 2_[DRD]_4January1999</div>
  <div class="csl-entry">Year, Month, Day, with differing month: 2January_[MRD]_4March1999</div>
  <div class="csl-entry">Year, Month, Day, with differing year: 2January1999_[YRD]_4January2000</div>
  <div class="csl-entry">Year, Month, with repeated year: January_[MRD]_March1999</div>
  <div class="csl-entry">Year, Month, with differing year: January1999_[YRD]_March2000</div>
  <div class="csl-entry">Year, with differing year: 1999_[YRD]_2000</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Year, Month, Day, with repeated month and year: 2_[DRD]_4 January 1999</div>
  <div class="csl-entry">Year, Month, Day, with differing month: 2 January_[MRD]_4 March 1999</div>
  <div class="csl-entry">Year, Month, Day, with differing year: 2 January 1999_[YRD]_4 January 2000</div>
  <div class="csl-entry">Year, Month, with repeated year: January_[MRD]_March 1999</div>
  <div class="csl-entry">Year, Month, with differing year: January 1999_[YRD]_March 2000</div>
  <div class="csl-entry">Year, with differing year: 1999_[YRD]_2000</div>
</div>'

Failure → citeproc test test-suite date_SortEmptyDatesCitation.txt
Passed in:
(string) 'BookA; BookB 2000; BookC; BookD 1999; BookE.'
Expected:
(string) 'BookD 1999; BookB 2000; BookA; BookC; BookE.'

Failure → citeproc test test-suite date_YearSuffixDelimiter.txt
Passed in:
(string) 'Doe 2000;Doe 2000;Doe 2001'
Expected:
(string) 'Doe 2000a,b;2001'

Failure → citeproc test test-suite date_YearSuffixImplicitWithNoDate.txt
Passed in:
(string) '(John Doe n.d. [Accessed:  June 1, 1965]; John Doe n.d. [Accessed:  June 1, 2065])'
Expected:
(string) '(John Doe n.d.-a [Accessed: June 1, 1965]; John Doe n.d.-b [Accessed: June 1, 2065])'

Failure → citeproc test test-suite date_YearSuffixImplicitWithNoDateOneOnly.txt
Passed in:
(string) '(John Doe n.d. [Accessed:  June 1, 1965])'
Expected:
(string) '(John Doe n.d. [Accessed: June 1, 1965])'

Failure → citeproc test test-suite date_YearSuffixWithNoDate.txt
Passed in:
(string) '(John Doe n.d. [Accessed:  June 1, 1965]; John Doe n.d. [Accessed:  June 1, 2065])'
Expected:
(string) '(John Doe n.d.-a [Accessed: June 1, 1965]; John Doe n.d.-b [Accessed: June 1, 2065])'

Failure → citeproc test test-suite decorations_NoNormalWithoutDecoration.txt
Passed in:
(string) '<span style="font-weight:normal;"><span style="font-style:normal;">His Anonymous Life</span>
<i>His Anonymous Life</i>
<i><span style="font-style:normal;">His Anonymous Life</span></i></span>'
Expected:
(string) 'His Anonymous Life
<i>His Anonymous Life</i>
<i><span style="font-style:normal;">His Anonymous Life</span></i>'

Failure → citeproc test test-suite disambiguate_AddNamesSuccess.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown, et al. (1980); Smith, Beefheart, et al. (1980)'

Failure → citeproc test test-suite disambiguate_AllNamesGenerally.txt
Passed in:
(string) 'Asthma, Bronchitis and Cold (1980); Asthma, Bronchitis and Cold (1995)'
Expected:
(string) 'Asthma, Bosworth Bronchitis and C. Cold (1980); Asthma, Beauregarde Bronchitis and O. Cold (1995)'

Failure → citeproc test test-suite disambiguate_AllNamesSimpleSequence.txt
Passed in:
(string) '(Malone 2001; Malone 1951)'
Expected:
(string) '(Nolan J. Malone 2001; Kemp Malone 1951)'

Failure → citeproc test test-suite disambiguate_AllNamesWithInitialsGenerally.txt
Passed in:
(string) 'Asthma, Bronchitis and Cold (1980); Asthma, Bronchitis and Cold (1995)'
Expected:
(string) 'Asthma, Bronchitis and C. Cold (1980); Asthma, Bronchitis and O. Cold (1995)'

Failure → citeproc test test-suite disambiguate_AndreaEg1a.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown, et al. (1980); Smith, Brown, et al. (1980)
Smith, Brown, et al. (1980); Smith, Benson, et al. (1980)
Smith, Brown, et al. (1980); Smith, Brown, et al. (1980)'

Failure → citeproc test test-suite disambiguate_AndreaEg1b.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; J. Jones (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Benson, et al. (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; A. Jones (1980)'

Failure → citeproc test test-suite disambiguate_AndreaEg2.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; J. Jones (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Benson, et al. (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; A. Jones (1980)'

Failure → citeproc test test-suite disambiguate_AndreaEg3.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown &#38; J. Jones (1980a); Smith, Brown &#38; J. Jones (1980b)
Smith, Brown &#38; J. Jones (1980a); Smith, Benson, et al. (1980)
Smith, Brown &#38; J. Jones (1980a); Smith, Brown &#38; A. Jones (1980)'

Failure → citeproc test test-suite disambiguate_AndreaEg4.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; J. Jones (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Benson, et al. (1980)
Smith, Brown &#38; J. Jones (1980); Smith, Brown &#38; A. Jones (1980)'

Failure → citeproc test test-suite disambiguate_AndreaEg5.txt
Passed in:
(string) 'Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)
Smith et al. (1980); Smith et al. (1980)'
Expected:
(string) 'Smith, Brown &#38; J. Jones (1980a); Smith, Brown &#38; J. Jones (1980b)
Smith, Brown &#38; J. Jones (1980a); Smith, Benson, et al. (1980)
Smith, Brown &#38; J. Jones (1980a); Smith, Brown &#38; A. Jones (1980)'

Failure → citeproc test test-suite disambiguate_BasedOnEtAlSubsequent.txt
Passed in:
(string) '(Baur, Fröberg, Baur, et al. 2000; Baur, Schileyko &#38; Baur, et al. 2000; Doe 2000)'
Expected:
(string) '(Baur, Fröberg, Baur, et al. 2000<i>a</i>; Baur, Schileyko &#38; Baur 2000<i>b</i>; Doe 2000)'

Failure → citeproc test test-suite disambiguate_BasedOnSubsequentFormWithBackref2.txt
Passed in:
(string) '..[0] John Doe, His Book (2000); John Doe, His Other Book (2001).
..[1] Jane Roe, Her Book (1998).
..[2] Roe, Her Book, supra note 2.
..[3] Doe, His Book, supra note 1.
>>[4] Roe, Her Book, supra note 2.'
Expected:
(string) '..[0] John Doe, His Book (2000); John Doe, His Other Book (2001).
..[1] Jane Roe, Her Book (1998).
..[2] Roe, supra note 2.
..[3] Doe, His Book, supra note 1.
>>[4] Roe, supra note 2.'

Failure → citeproc test test-suite disambiguate_ByCiteBaseNameCountOnFailureIfYearSuffixAvailable.txt
Passed in:
(string) 'Asthma et al. (1990); Asthma et al. (1990); Dropsy et al. (2000); Dropsy et al. (2000)'
Expected:
(string) 'Asthma, Bosworth Bronchitis, et al. (1990); Asthma, Beauregarde Bronchitis, et al. (1990); Dropsy, Edward Enteritis, et al. (2000); Dropsy, Ernie Enteritis, et al. (2000)'

Failure → citeproc test test-suite disambiguate_ByCiteGivennameExpandCrossNestedNames.txt
Passed in:
(string) 'J. Doe et al.; J. Doe et al.; J. Doe et al.'
Expected:
(string) 'J. Doe, Jane Roe, Robert Jones; J. Doe, Josephine Roe, et al.; J. Doe, Jane Roe, Richard Jones'

Failure → citeproc test test-suite disambiguate_ByCiteGivennameNoShortFormInitializeWith.txt
Passed in:
(string) 'J Roe
J Doe; J Doe'
Expected:
(string) 'J Roe
John Doe; Jack Doe'

Failure → citeproc test test-suite disambiguate_ByCiteGivennameShortFormInitializeWith.txt
Passed in:
(string) 'Roe
Doe; Doe
Smith; Smith'
Expected:
(string) 'Roe
J Doe; A Doe
Thomas Smith; Ted Smith'

Failure → citeproc test test-suite disambiguate_ByCiteGivennameShortFormNoInitializeWith.txt
Passed in:
(string) 'Roe
Doe; Doe'
Expected:
(string) 'Roe
John Doe; Aloysius Doe'

Failure → citeproc test test-suite disambiguate_ByCiteRetainNamesOnFailureIfYearSuffixNotAvailable.txt
Passed in:
(string) 'Asthma et al. (1990); Asthma et al. (1990); Dropsy et al. (2000); Dropsy et al. (2000)'
Expected:
(string) 'Asthma, Bosworth Bronchitis, et al. (1990); Asthma, Beauregarde Bronchitis, et al. (1990); Dropsy, Edward Enteritis, et al. (2000); Dropsy, Ernie Enteritis, et al. (2000)'

Failure → citeproc test test-suite disambiguate_CitationLabelDefault.txt
Passed in:
(string) '[CSL STYLE ERROR: reference with no printed form.]'
Expected:
(string) 'Asth00a; Asth00b; Bron00'

Failure → citeproc test test-suite disambiguate_CitationLabelInData.txt
Passed in:
(string) 'SpiffLabel1900; SpiffLabel1900'
Expected:
(string) 'SpiffLabel1900a; SpiffLabel1900b; Bron00; BrCh98; DEFG26'

Failure → citeproc test test-suite disambiguate_DisambiguateTrueAndYearSuffixOne.txt
Passed in:
(string) 'Pollock, Title One, 1979
Pollock, Title Two, 1980'
Expected:
(string) 'Pollock, 1979
Pollock, 1980'

Failure → citeproc test test-suite disambiguate_DisambiguateTrueReflectedInBibliography.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Smith, Book One</div>
  <div class="csl-entry">Smith, Book Two</div>
  <div class="csl-entry">Brown, Book the X</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Smith, Book One</div>
  <div class="csl-entry">Smith, Book Two</div>
  <div class="csl-entry">Brown</div>
</div>'

Failure → citeproc test test-suite disambiguate_DisambiguationHang.txt
Passed in:
(string) '..[0] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990)
..[1] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990)
>>[2] (Caminiti, Johnson, &#38; Urbano 1990)'
Expected:
(string) '>>[0] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990a)
>>[1] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990b)
>>[2] (Caminiti, Johnson, &#38; Urbano 1990)'

Failure → citeproc test test-suite disambiguate_ImplicitYearSuffixOnceOnly.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[1990] Doe, Book A 05/30/1990</div>
  <div class="csl-entry">[1990] Doe, Book B 05/30/1990</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">[1990a] Doe, Book A 05/30/1990</div>
  <div class="csl-entry">[1990b] Doe, Book B 05/30/1990</div>
</div>'

Failure → citeproc test test-suite disambiguate_IncrementalExtraText.txt
Passed in:
(string) 'Yost Trisk, Book One
John Smith, Book One, ed. 3
John Smith, Book Two, ed. 4
John Smith, Complete Works, ed. 5
John Smith, Complete Works, ed. 6'
Expected:
(string) 'Yost Trisk
John Smith, Book One
John Smith, Book Two
John Smith, Complete Works, ed. 5
John Smith, Complete Works, ed. 6'

Failure → citeproc test test-suite disambiguate_LastOnlyFailWithByCite.txt
Passed in:
(string) 'Organisation 2010
Organisation 2010'
Expected:
(string) 'Organisation 2010a
Organisation 2010b'

Failure → citeproc test test-suite disambiguate_NoTextElementUsesYearSuffixVariable.txt
Passed in:
(string) 'Doe (2000); Doe (2000)'
Expected:
(string) 'Doe (2000a); Doe (2000b)'

Failure → citeproc test test-suite disambiguate_PrimaryNameGenerally.txt
Passed in:
(string) 'Asthma and Bronchitis (1980); Asthma and Bronchitis (1995)'
Expected:
(string) 'Aloysius Asthma and Bronchitis (1980); Artemis Asthma and Bronchitis (1995)'

Failure → citeproc test test-suite disambiguate_PrimaryNameWithInitialsLimitedToPrimary.txt
Passed in:
(string) 'Asthma et al. (1980); Asthma et al. (1995); Dropsy and Asthma (1995)'
Expected:
(string) 'A. Asthma et al. (1980); G. Asthma et al. (1995); Dropsy and Asthma (1995)'

Failure → citeproc test test-suite disambiguate_ToInitialOnly.txt
Passed in:
(string) 'Smith; Smith; Muggins; Muggins'
Expected:
(string) 'Smith; Smith; B. Muggins; J. Muggins'

Failure → citeproc test test-suite disambiguate_Trigraph.txt
Passed in:
(string) '[CSL STYLE ERROR: reference with no printed form.]
[CSL STYLE ERROR: reference with no printed form.]
[CSL STYLE ERROR: reference with no printed form.]'
Expected:
(string) 'Aalt02a
Aalt02b
Aalt02c'

Failure → citeproc test test-suite disambiguate_YearCollapseWithInstitution.txt
Passed in:
(string) '(Smith Co 2000; Smith Co 2000; Smith Co 2000)
(Smith Co 2000)
(Smith Co 2000)'
Expected:
(string) '(Smith Co 2000a; 2000b; 2000c)
(Smith Co 2000b)
(Smith Co 2000c)'

Failure → citeproc test test-suite disambiguate_YearSuffixAtTwoLevels.txt
Passed in:
(string) 'Smith et al. (1986); Smith et al. (1986); Smith et al. (1986); Smith et al. (1986)'
Expected:
(string) 'Smith, Jones &#38; Brown (1986a); Smith, Jones &#38; Brown (1986b); Smith, Jones, Brown, et al. (1986a); Smith, Jones, Brown, et al. (1986b)'

Failure → citeproc test test-suite disambiguate_YearSuffixFiftyTwoEntries.txt
Passed in:
(string) '..[0] (Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986)
>>[1] (Smith 1986)'
Expected:
(string) '..[0] (Smith 1986a; Smith 1986b; Smith 1986c; Smith 1986d; Smith 1986e; Smith 1986f; Smith 1986g; Smith 1986h; Smith 1986i; Smith 1986j; Smith 1986k; Smith 1986l; Smith 1986m; Smith 1986n; Smith 1986o; Smith 1986p; Smith 1986q; Smith 1986r; Smith 1986s; Smith 1986t; Smith 1986u; Smith 1986v; Smith 1986w; Smith 1986x; Smith 1986y; Smith 1986z; Smith 1986aa; Smith 1986ab; Smith 1986ac; Smith 1986ad; Smith 1986ae; Smith 1986af; Smith 1986ag; Smith 1986ah; Smith 1986ai; Smith 1986aj; Smith 1986ak; Smith 1986al; Smith 1986am; Smith 1986an; Smith 1986ao; Smith 1986ap; Smith 1986aq; Smith 1986ar; Smith 1986as; Smith 1986at; Smith 1986au; Smith 1986av; Smith 1986aw; Smith 1986ax; Smith 1986ay)
>>[1] (Smith 1986az)'

Failure → citeproc test test-suite disambiguate_YearSuffixFiftyTwoEntriesByCite.txt
Passed in:
(string) '..[0] (Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986; Smith 1986)
>>[1] (Smith 1986)'
Expected:
(string) '..[0] (Smith 1986a; Smith 1986b; Smith 1986c; Smith 1986d; Smith 1986e; Smith 1986f; Smith 1986g; Smith 1986h; Smith 1986i; Smith 1986j; Smith 1986k; Smith 1986l; Smith 1986m; Smith 1986n; Smith 1986o; Smith 1986p; Smith 1986q; Smith 1986r; Smith 1986s; Smith 1986t; Smith 1986u; Smith 1986v; Smith 1986w; Smith 1986x; Smith 1986y; Smith 1986z; Smith 1986aa; Smith 1986ab; Smith 1986ac; Smith 1986ad; Smith 1986ae; Smith 1986af; Smith 1986ag; Smith 1986ah; Smith 1986ai; Smith 1986aj; Smith 1986ak; Smith 1986al; Smith 1986am; Smith 1986an; Smith 1986ao; Smith 1986ap; Smith 1986aq; Smith 1986ar; Smith 1986as; Smith 1986at; Smith 1986au; Smith 1986av; Smith 1986aw; Smith 1986ax; Smith 1986ay)
>>[1] (Smith 1986az)'

Failure → citeproc test test-suite disambiguate_YearSuffixMacroSameYearExplicit.txt
Passed in:
(string) 'Smith 2001
Smith 2001'
Expected:
(string) 'A Smith 2001
B Smith 2001'

Failure → citeproc test test-suite disambiguate_YearSuffixMacroSameYearImplicit.txt
Passed in:
(string) 'Smith 2001
Smith 2001'
Expected:
(string) 'A Smith 2001
B Smith 2001'

Failure → citeproc test test-suite disambiguate_YearSuffixMixedDates.txt
Passed in:
(string) '(A Ylinen, 1995; A Ylinen, 1995; A Ylinen, 1995)'
Expected:
(string) '(A Ylinen, 1995a; b; c)'

Failure → citeproc test test-suite disambiguate_YearSuffixWithEtAlSubequent.txt
Passed in:
(string) '(Smith 2000; Smith 2000; Smith 2000)
(Smith 2000)
(Smith 2000)'
Expected:
(string) '(Smith 2000a; 2000b; 2000c)
(Smith 2000b)
(Smith 2000c)'

Failure → citeproc test test-suite display_AuthorAsHeading.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">John Aloysius Doe</div>

    <div class="csl-left-margin">1999</div><div class="csl-right-inline">Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">John Aloysius Doe</div>

    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">1999</div><div class="csl-right-inline">Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">1999</div><div class="csl-right-inline">Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">John Aloysius Doe</div>

    <div class="csl-left-margin">1999</div><div class="csl-right-inline">Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">1999a</div><div class="csl-right-inline">Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">1999b</div><div class="csl-right-inline">Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee</div>
  </div>
</div>'

Failure → citeproc test test-suite display_SecondFieldAlignMigratePunctuation.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> B. D’Arcus, <i>Boundaries of Dissent: Protest and State Power in the Media Age</i>, Routledge, 2005</div>
    .</div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> F.G. Bennett Jr., “Getting Property Right: ’Informal’ Mortgages in the Japanese Courts,” <i>Pac. Rim L. &#38; Pol’y J.</i>,  vol. 18, Aug. 2009, pp. 463–509</div>
    .</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> B. D’Arcus, <i>Boundaries of Dissent: Protest and State Power in the Media Age</i>, Routledge, 2005.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> F.G. Bennett Jr., “Getting Property Right: ‘Informal’ Mortgages in the Japanese Courts,” <i>Pac. Rim L. &#38; Pol’y J.</i>, vol. 18, Aug. 2009, pp. 463–509.</div>
  </div>
</div>'

Failure → citeproc test test-suite flipflop_ApostropheInsideTag.txt
Passed in:
(string) 'l''''
Expected:
(string) 'l’’’'

Failure → citeproc test test-suite flipflop_LeadingMarkupWithApostrophe.txt
Passed in:
(string) '<i>Insha’Allah</i> is an Arabic phrase meaning “God willing.” Another Arabic word is <i>bukra</i>. Aalto'
Expected:
(string) '<i>Insha’Allah</i> is an Arabic phrase meaning ‘God willing’. Another Arabic word is <i>bukra</i>. Aalto'

Failure → citeproc test test-suite flipflop_NumericField.txt
Passed in:
(string) '1<sup>er</sup>'
Expected:
(string) '1&#60;sup&#62;er&#60;/sup&#62;'

Failure → citeproc test test-suite flipflop_OrphanQuote.txt
Passed in:
(string) 'Nation of “Positive Obligations ” of State under the European Convention on Human Rights (1)'
Expected:
(string) 'Nation of "Positive Obligations " of State under the European Convention on Human Rights (1)'

Failure → citeproc test test-suite flipflop_SingleBeforeColon.txt
Passed in:
(string) '“Nobody Knows You’Re a Dog”: As Iconic Internet Cartoon Turns 20, Creator Peter Steiner Knows the Joke Rings as Relevant as Ever'
Expected:
(string) '“Nobody Knows You’re a Dog”: As Iconic Internet Cartoon Turns 20, Creator Peter Steiner Knows the Joke Rings as Relevant as Ever'

Failure → citeproc test test-suite group_SuppressTermInMacro.txt
Passed in:
(string) 'His Anonymous Life, in'
Expected:
(string) 'His Anonymous Life'

Failure → citeproc test test-suite integration_FirstReferenceNoteNumberPositionChange.txt
Passed in:
(string) '>>[0] Snoakes, “Life of Snoakes” (1902).
..[1] Doe, “Life of Doe” (1901).
..[2] Roe, “Life of Roe” (1900).
..[3] Doe, supra note 1.
..[4] Roe, supra note 2.'
Expected:
(string) '>>[0] Snoakes, “Life of Snoakes” (1902).
>>[1] Doe, “Life of Doe” (1901).
>>[2] Roe, “Life of Roe” (1900).
>>[3] Doe, supra note 2.
>>[4] Roe, supra note 3.'

Failure → citeproc test test-suite integration_IbidOnInsert.txt
Passed in:
(string) '..[0] (Doe p. 12)
>>[1] (Noakes p. 34)
..[2] (Noakes p. 34)
..[3] (Snoakes p. 45)'
Expected:
(string) '..[0] (Doe p. 12)
>>[1] (Noakes p. 34)
>>[2] (Ibid.)
..[3] (Snoakes p. 45)'

Failure → citeproc test test-suite integration_IbidWithDifferentLocators.txt
Passed in:
(string) '..[0] (Doe p. 12)
..[1] (Ibid.)
..[2] (Roe bk. 20)
>>[3] (Ibid.)'
Expected:
(string) '..[0] (Doe p. 12)
..[1] (ibid-with-locator)
..[2] (Roe bk. 20)
>>[3] (ibid-with-locator)'

Failure → citeproc test test-suite integration_SimpleIbid.txt
Passed in:
(string) '..[0] (Doe p. 12; Roe p. 23)
>>[1] (Noakes p. 34; Ibid.; Snoakes p. 45)'
Expected:
(string) '..[0] (Doe p. 12; Roe p. 23)
>>[1] (Noakes p. 34; ibid.; Snoakes p. 45)'

Failure → citeproc test test-suite integration_YearSuffixOnOffOn.txt
Passed in:
(string) '>>[0] Smith (1986); Smith (1986); Smith (1986); Smith (1986)'
Expected:
(string) '>>[0] Smith (1986a); Smith (1986b); Smith (1986c); Smith (1986d)'

Failure → citeproc test test-suite label_EditorTranslator2.txt
Passed in:
(string) 'Some title, “Hello there.”'
Expected:
(string) 'Some title, “Hello there”.'

Failure → citeproc test test-suite label_NoFirstCharCapWithInTextClass.txt
Passed in:
(string) 'N.d.'
Expected:
(string) 'n.d.'

Failure → citeproc test test-suite locator_SimpleLocators.txt
Passed in:
(string) 'Doe, Book A, 2000, pp. 100–103; Roe, Book B, 2001, chaps. 200 - 201.'
Expected:
(string) 'Doe, Book A, 2000, pp. 100–103; Roe, Book B, 2001, chaps. 200–201.'

Failure → citeproc test test-suite magic_ImplicitYearSuffixDelimiter.txt
Passed in:
(string) 'John Doe 1965; John Doe 1965'
Expected:
(string) 'John Doe 1965a; b'

Failure → citeproc test test-suite magic_ImplicitYearSuffixExplicitDelimiter.txt
Passed in:
(string) '(1965; 1965)'
Expected:
(string) '(1965a,b)'

Failure → citeproc test test-suite magic_NameSuffixWithComma.txt
Passed in:
(string) 'John Doe ! Jr.'
Expected:
(string) 'John Doe, Jr.'

Failure → citeproc test test-suite magic_SubsequentAuthorSubstitute.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">John Smith and Jane Roe, Book A (2000)</div>
  <div class="csl-entry">John Smith and Jane Roe, Book B (2001)</div>
  <div class="csl-entry">John Smith, Book C (2002)</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">John Smith and Jane Roe, Book A (2000)</div>
  <div class="csl-entry">———, Book B (2001)</div>
  <div class="csl-entry">John Smith, Book C (2002)</div>
</div>'

Failure → citeproc test test-suite magic_SubsequentAuthorSubstituteOfTitleField.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Warren Smith (2000)</div>
  <div class="csl-entry">Warren Smith (2001)</div>
  <div class="csl-entry">Book Y (2002)</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Warren Smith (2000)</div>
  <div class="csl-entry">----- (2001)</div>
  <div class="csl-entry">Book Y (2002)</div>
</div>'

Failure → citeproc test test-suite name_AfterInvertedName.txt
Passed in:
(string) 'DOEBUCK, Jonathan, et al.; DOE, John, et al.; DOE, John, et al.
APPLEBY, Aloysius, and Bobby BROWN; APPLEBY, Aloysius, et al.; APPLEBY, Aloysius, et al.'
Expected:
(string) 'DOEBUCK, Jonathan, et al.; DOE, John, Jane ROE et al.; DOE, John, Janice ROEBUCK et al.
APPLEBY, Aloysius, and Bobby BROWN; APPLEBY, Aloysius, Bobby BROWN and Cecile CREAM; APPLEBY, Aloysius, Bobby BROWN and Enola EVERGREEN'

Failure → citeproc test test-suite name_CiteGroupDelimiterWithYearSuffixCollapse.txt
Passed in:
(string) '(Aalto 2015; Aalto 2015)'
Expected:
(string) '(Aalto 2015a, b)'

Failure → citeproc test test-suite name_CollapseRoleLabels.txt
Passed in:
(string) 'Albert Asthma et al. (eds.), Albert Asthma et al. (trans.)'
Expected:
(string) 'Albert Asthma et al. (eds. &#38; trans.)'

Failure → citeproc test test-suite name_DelimiterAfterInverted.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Australian Government Productivity Commission, &#38; New Zealand Productivity Commission</div>
  <div class="csl-entry">Weinstock, R., Leong, G. B., &#38; Silva, J. A.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Australian Government Productivity Commission &#38; New Zealand Productivity Commission</div>
  <div class="csl-entry">Weinstock, R., Leong, G. B., &#38; Silva, J. A.</div>
</div>'

Failure → citeproc test test-suite name_EditorTranslatorSameWithTerm.txt
Passed in:
(string) 'John Doe (ed.), John Doe (tran.)'
Expected:
(string) 'John Doe (ed. &#38; tran.)'

Failure → citeproc test test-suite name_HebrewAnd.txt
Passed in:
(string) 'תפוח ו  תפוז'
Expected:
(string) 'תפוחו תפוז'

Failure → citeproc test test-suite name_InTextMarkupInitialize.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><b>Doe</b>, <b>John</b> Q.</div>
  <div class="csl-entry"><b>Doe</b>, <b>John</b>-Q.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><b>Doe</b>, <b>J.</b> Q.</div>
  <div class="csl-entry"><b>Doe</b>, <b>J.</b>-Q.</div>
</div>'

Failure → citeproc test test-suite name_InTextMarkupNormalizeInitials.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><b>Doe</b>, <b>J</b> Q.</div>
  <div class="csl-entry"><b>Doe</b>, <b>J</b>-Q.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><b>Doe</b>, <b>J.</b> Q.</div>
  <div class="csl-entry"><b>Doe</b>, <b>J.</b>-Q.</div>
</div>'

Failure → citeproc test test-suite name_ParseNames.txt
Passed in:
(string) 'van der Vlist, Eric; van Gogh, Vincent; Humboldt, Alexander von'
Expected:
(string) 'van Gogh, Vincent; Humboldt, Alexander von; van der Vlist, Eric'

Failure → citeproc test test-suite name_ParsedNonDroppingParticleWithApostrophe.txt
Passed in:
(string) '<span style="font-variant:small-caps;">d’Aubignac</span> (François Hédelin)'
Expected:
(string) '<span style="font-variant:small-caps;">Aubignac</span> (François Hédelin <span style="font-variant:small-caps;">d’</span>)'

Failure → citeproc test test-suite name_ParticlesDemoteNonDroppingNever.txt
Passed in:
(string) '<b>Familyname</b>, <i>Givenname al</i>
<b>Familyname</b>, <i>Givenname dos</i>
<b>Familyname</b>, <i>Givenname el</i>
<b>Las Familyname</b>, <i>Givenname de</i>
<b>Familyname</b>, <i>Givenname lo</i>
<b>Familyname</b>, <i>Givenname les</i>
<b>Familyname</b>, <i>Givenname il</i>
<b>del Familyname</b>, <i>Givenname</i>
<b>Familyname</b>, <i>Givenname dela</i>
<b>Familyname</b>, <i>Givenname della</i>
<b>Familyname</b>, <i>Givenname dello</i>
<b>Di Familyname</b>, <i>Givenname</i>
<b>Da Familyname</b>, <i>Givenname</i>
<b>Do Familyname</b>, <i>Givenname</i>
<b>Des Familyname</b>, <i>Givenname</i>
<b>Lou Familyname</b>, <i>Givenname</i>
<b>Pietro Familyname</b>, <i>Givenname</i>
<b>de Familyname</b>, <i>Givenname</i>
<b>La Familyname</b>, <i>Givenname de</i>
<b>Familyname</b>, <i>Givenname du</i>
<b>d’</b><b>Familyname</b>, <i>Givenname</i>
<b>Le Familyname</b>, <i>Givenname</i>
<b>La Familyname</b>, <i>Givenname</i>
<b>L’Familyname</b>, <i>Givenname</i>
<b>Saint Familyname</b>, <i>Givenname</i>
<b>Sainte Familyname</b>, <i>Givenname</i>
<b>St. Familyname</b>, <i>Givenname</i>
<b>Ste. Familyname</b>, <i>Givenname</i>
<b>van Familyname</b>, <i>Givenname</i>
<b>van de Familyname</b>, <i>Givenname</i>
<b>van der Familyname</b>, <i>Givenname</i>
<b>van den Familyname</b>, <i>Givenname</i>
<b>vander Familyname</b>, <i>Givenname</i>
<b>v.d. Familyname</b>, <i>Givenname</i>
<b>vd Familyname</b>, <i>Givenname</i>
<b>van het Familyname</b>, <i>Givenname</i>
<b>ver Familyname</b>, <i>Givenname</i>
<b>ten Familyname</b>, <i>Givenname</i>
<b>ter Familyname</b>, <i>Givenname</i>
<b>te Familyname</b>, <i>Givenname</i>
<b>Familyname</b>, <i>Givenname op de</i>
<b>in de Familyname</b>, <i>Givenname</i>
<b>in ’t Familyname</b>, <i>Givenname</i>
<b>’t Familyname</b>, <i>Givenname</i>
<b>in het Familyname</b>, <i>Givenname</i>
<b>uit de Familyname</b>, <i>Givenname</i>
<b>uit den Familyname</b>, <i>Givenname</i>
<b>Familyname</b>, <i>Givenname von</i>
<b>Familyname</b>, <i>Givenname von der</i>
<b>Familyname</b>, <i>Givenname von dem</i>
<b>Familyname</b>, <i>Givenname von zu</i>
<b>v. Familyname</b>, <i>Givenname</i>
<b>v Familyname</b>, <i>Givenname</i>
<b>Familyname</b>, <i>Givenname vom</i>
<b>Familyname</b>, <i>Givenname das</i>
<b>Familyname</b>, <i>Givenname zum</i>
<b>Familyname</b>, <i>Givenname zur</i>
<b>Familyname</b>, <i>Givenname den</i>
<b>Familyname</b>, <i>Givenname der</i>
<b>Familyname</b>, <i>Givenname des</i>
<b>Familyname</b>, <i>Givenname auf den</i>'
Expected:
(string) '<b>Familyname</b>, <i>Givenname</i> <i>al</i>
<b>Familyname</b>, <i>Givenname</i> <i>dos</i>
<b>Familyname</b>, <i>Givenname</i> <i>el</i>
<b>Las Familyname</b>, <i>Givenname</i> <i>de</i>
<b>Familyname</b>, <i>Givenname</i> <i>lo</i>
<b>Familyname</b>, <i>Givenname</i> <i>les</i>
<b>Familyname</b>, <i>Givenname</i> <i>il</i>
<b>del</b> <b>Familyname</b>, <i>Givenname</i>
<b>Familyname</b>, <i>Givenname</i> <i>dela</i>
<b>Familyname</b>, <i>Givenname</i> <i>della</i>
<b>Familyname</b>, <i>Givenname</i> <i>dello</i>
<b>Di Familyname</b>, <i>Givenname</i>
<b>Da Familyname</b>, <i>Givenname</i>
<b>Do Familyname</b>, <i>Givenname</i>
<b>Des Familyname</b>, <i>Givenname</i>
<b>Lou Familyname</b>, <i>Givenname</i>
<b>Pietro Familyname</b>, <i>Givenname</i>
<b>de</b> <b>Familyname</b>, <i>Givenname</i>
<b>La Familyname</b>, <i>Givenname</i> <i>de</i>
<b>Familyname</b>, <i>Givenname</i> <i>du</i>
<b>Familyname</b>, <i>Givenname</i> <i>d’</i>
<b>Le Familyname</b>, <i>Givenname</i>
<b>La Familyname</b>, <i>Givenname</i>
<b>L’Familyname</b>, <i>Givenname</i>
<b>Saint Familyname</b>, <i>Givenname</i>
<b>Sainte Familyname</b>, <i>Givenname</i>
<b>St. Familyname</b>, <i>Givenname</i>
<b>Ste. Familyname</b>, <i>Givenname</i>
<b>van</b> <b>Familyname</b>, <i>Givenname</i>
<b>van de</b> <b>Familyname</b>, <i>Givenname</i>
<b>van der</b> <b>Familyname</b>, <i>Givenname</i>
<b>van den</b> <b>Familyname</b>, <i>Givenname</i>
<b>vander</b> <b>Familyname</b>, <i>Givenname</i>
<b>v.d.</b> <b>Familyname</b>, <i>Givenname</i>
<b>vd</b> <b>Familyname</b>, <i>Givenname</i>
<b>van het</b> <b>Familyname</b>, <i>Givenname</i>
<b>ver</b> <b>Familyname</b>, <i>Givenname</i>
<b>ten</b> <b>Familyname</b>, <i>Givenname</i>
<b>ter</b> <b>Familyname</b>, <i>Givenname</i>
<b>te</b> <b>Familyname</b>, <i>Givenname</i>
<b>Familyname</b>, <i>Givenname</i> <i>op de</i>
<b>in de</b> <b>Familyname</b>, <i>Givenname</i>
<b>in ’t</b> <b>Familyname</b>, <i>Givenname</i>
<b>’t</b> <b>Familyname</b>, <i>Givenname</i>
<b>in het</b> <b>Familyname</b>, <i>Givenname</i>
<b>uit de</b> <b>Familyname</b>, <i>Givenname</i>
<b>uit den</b> <b>Familyname</b>, <i>Givenname</i>
<b>Familyname</b>, <i>Givenname</i> <i>von</i>
<b>Familyname</b>, <i>Givenname</i> <i>von der</i>
<b>Familyname</b>, <i>Givenname</i> <i>von dem</i>
<b>Familyname</b>, <i>Givenname</i> <i>von zu</i>
<b>v.</b> <b>Familyname</b>, <i>Givenname</i>
<b>v</b> <b>Familyname</b>, <i>Givenname</i>
<b>Familyname</b>, <i>Givenname</i> <i>vom</i>
<b>Familyname</b>, <i>Givenname</i> <i>das</i>
<b>Familyname</b>, <i>Givenname</i> <i>zum</i>
<b>Familyname</b>, <i>Givenname</i> <i>zur</i>
<b>Familyname</b>, <i>Givenname</i> <i>den</i>
<b>Familyname</b>, <i>Givenname</i> <i>der</i>
<b>Familyname</b>, <i>Givenname</i> <i>des</i>
<b>Familyname</b>, <i>Givenname</i> <i>auf den</i>'

Failure → citeproc test test-suite name_SubsequentAuthorSubstituteMultipleNames.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Bumke, Courtly Culture: Literature and Society in the High Middle Ages, Dunlap tran.</div>
  <div class="csl-entry">Bumke, Höfische</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Bumke, Courtly Culture: Literature and Society in the High Middle Ages, Dunlap tran.</div>
  <div class="csl-entry">-----, Höfische</div>
</div>'

Failure → citeproc test test-suite name_SubsequentAuthorSubstituteSingleField.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Yomiuri Shinbun.</div>
  <div class="csl-entry">Yomiuri Shinbun.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Yomiuri Shinbun.</div>
  <div class="csl-entry">———.</div>
</div>'

Failure → citeproc test test-suite name_SubstitutePartialEach.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Title One</div>
  <div class="csl-entry">Title One</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Title One</div>
  <div class="csl-entry">---</div>
</div>'

Failure → citeproc test test-suite name_WithNonBreakingSpace.txt
Passed in:
(string) 'John  Doe'
Expected:
(string) 'John Doe'

Failure → citeproc test test-suite name_namepartAffixes.txt
Passed in:
(string) '[Jean de] (La Fontaine) III'
Expected:
(string) '[Jean] (de La Fontaine III)'

Failure → citeproc test test-suite number_OrdinalSpacing.txt
Passed in:
(string) 'Blah blah. 7, p. 3-8DD<i>ed</i>'
Expected:
(string) 'Blah blah. 7th, pp. 3–8DD<i>ed</i>'

Failure → citeproc test test-suite number_PlainHyphenOrEnDashAlwaysPlural.txt
Passed in:
(string) 'His Anonymous Life (1) pages 1–2 (cs:text) vs His Anonymous Life (1) pages 1–2 (cs:number); His Anonymous Life (2) pages i–ix (cs:text) vs His Anonymous Life (2) pages i–ix (cs:number); His Anonymous Life (3) page 3-B (cs:text) vs His Anonymous Life (3) page 3-B (cs:number); His Anonymous Life (4) pages Michaelson–Morely (cs:text) vs His Anonymous Life (4) pages Michaelson–Morely (cs:number); His Anonymous Life (4) pages Michaelson–Morely (cs:text) vs His Anonymous Life (4) pages Michaelson–Morely (cs:number)'
Expected:
(string) 'His Anonymous Life (1) pages 1–2 (cs:text) vs His Anonymous Life (1) pages 1–2 (cs:number); His Anonymous Life (2) pages i–ix (cs:text) vs His Anonymous Life (2) pages i–ix (cs:number); His Anonymous Life (3) page 3-B (cs:text) vs His Anonymous Life (3) page 3-B (cs:number); His Anonymous Life (4) page Michaelson-Morely (cs:text) vs His Anonymous Life (4) page Michaelson-Morely (cs:number)'

Failure → citeproc test test-suite position_IbidInText.txt
Passed in:
(string) '..[0] Appleton “Tom Swift and His Electric Runabout” (1910).
..[1] Bloggs “A Very Short Book Indeed” (2012).
>>[2] Appleton “Tom Swift and His Electric Runabout” (1910).'
Expected:
(string) '..[0] Appleton “Tom Swift and His Electric Runabout” (1910).
..[1] Bloggs “A Very Short Book Indeed” (2012).
>>[2] Ibid.'

Failure → citeproc test test-suite position_IbidWithMultipleSoloCitesInBackref.txt
Passed in:
(string) '..[0] Aalto
..[1] Álvarez
..[2] Ibid.
>>[3] Ibid.'
Expected:
(string) '..[0] Aalto
..[1] Álvarez
..[2] Álvarez
>>[3] Ibid.'

Failure → citeproc test test-suite position_IbidWithPrefixFullStop.txt
Passed in:
(string) '>>[0] Book A; . He said “Please work.” ibid.'
Expected:
(string) '>>[0] Book A. He said “Please work.” Ibid.'

Failure → citeproc test test-suite position_ResetNoteNumbers.txt
Passed in:
(string) '..[0] Book A (note 1)
..[1] Book C (note 1)
..[2] ibid (note 2)
..[3] Book A, n 1 (note 2)
..[4] Book C (note 3)
..[5] Book A, n 1 (note 3)
..[6] Book C, n 1 (note 4)
>>[7] Book A, n 1 (note 5)'
Expected:
(string) '..[0] Book A (note 1)
..[1] Book C (note 1)
..[2] Book A, n 1 (note 2)
..[3] ibid (note 2)
..[4] Book C, n 1 (note 3)
..[5] Book A, n 1 (note 3)
..[6] Book C, n 1 (note 4)
>>[7] Book A, n 1 (note 5)'

Failure → citeproc test test-suite punctuation_FrenchOrthography.txt
Passed in:
(string) 'His “ Anonymous ” Life'
Expected:
(string) 'His « Anonymous » Life'

Failure → citeproc test test-suite punctuation_FullMontyField.txt
Passed in:
(string) 'ENDING IN COLON
colon:: colon
period.: colon
semicolon;: colon
exclamation!: colon
question?: colon
comma,: colon

ENDING IN PERIOD
colon:. period
period. period
semicolon;. period
exclamation!. period
question?. period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon;; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon:! exclamation
period.! exclamation
semicolon;! exclamation
exclamation!! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon:? question
period.? question
semicolon;? question
exclamation!? question
question?? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'
Expected:
(string) 'ENDING IN COLON
colon: colon
period.: colon
semicolon; colon
exclamation! colon
question? colon
comma,: colon

ENDING IN PERIOD
colon: period
period. period
semicolon; period
exclamation! period
question? period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon! exclamation
period.! exclamation
semicolon! exclamation
exclamation! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon? question
period.? question
semicolon? question
exclamation!? question
question? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'

Failure → citeproc test test-suite punctuation_FullMontyPlain.txt
Passed in:
(string) 'ENDING IN COLON
colon:: colon
period.: colon
semicolon;: colon
exclamation!: colon
question?: colon
comma,: colon

ENDING IN PERIOD
colon:. period
period. period
semicolon;. period
exclamation!. period
question?. period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon;; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon:! exclamation
period.! exclamation
semicolon;! exclamation
exclamation!! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon:? question
period.? question
semicolon;? question
exclamation!? question
question?? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'
Expected:
(string) 'ENDING IN COLON
colon: colon
period.: colon
semicolon; colon
exclamation! colon
question? colon
comma,: colon

ENDING IN PERIOD
colon: period
period. period
semicolon; period
exclamation! period
question? period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon! exclamation
period.! exclamation
semicolon! exclamation
exclamation! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon? question
period.? question
semicolon? question
exclamation!? question
question? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'

Failure → citeproc test test-suite punctuation_FullMontyQuotesIn.txt
Passed in:
(string) 'ENDING IN COLON
“colon”:: colon
“period.”: colon
“semicolon;”: colon
“exclamation”!: colon
“question?”: colon
“comma,”: colon

ENDING IN PERIOD
“colon”:. period
“period.” period
“semicolon;”. period
“exclamation”!. period
“question?”. period
“comma,”. period

ENDING IN SEMICOLON
“colon”:; semicolon
“period.”; semicolon
“semicolon;”; semicolon
“exclamation”!; semicolon
“question?”; semicolon
“comma,”; semicolon

ENDING IN EXCLAMATION
“colon”:! exclamation
“period.”! exclamation
“semicolon;”! exclamation
“exclamation”!! exclamation
“question?”! exclamation
“comma,”! exclamation

ENDING IN QUESTION
“colon”:? question
“period.”? question
“semicolon;”? question
“exclamation”!? question
“question?”? question
“comma,”? question

ENDING IN COMMA
“colon”:, comma
“period.”, comma
“semicolon;”, comma
“exclamation”!, comma
“question?”, comma
“comma,” comma'
Expected:
(string) 'ENDING IN COLON
“colon”: colon
“period.”: colon
“semicolon”; colon
“exclamation!” colon
“question?” colon
“comma,”: colon

ENDING IN PERIOD
“colon”: period
“period.” period
“semicolon”; period
“exclamation!” period
“question?” period
“comma,.” period

ENDING IN SEMICOLON
“colon”:; semicolon
“period.”; semicolon
“semicolon”; semicolon
“exclamation!”; semicolon
“question?”; semicolon
“comma,”; semicolon

ENDING IN EXCLAMATION
“colon!” exclamation
“period.!” exclamation
“semicolon!” exclamation
“exclamation!” exclamation
“question?!” exclamation
“comma,!” exclamation

ENDING IN QUESTION
“colon?” question
“period.?” question
“semicolon?” question
“exclamation!?” question
“question?” question
“comma,?” question

ENDING IN COMMA
“colon”:, comma
“period.,” comma
“semicolon”;, comma
“exclamation!,” comma
“question?,” comma
“comma,” comma'

Failure → citeproc test test-suite punctuation_FullMontyQuotesOut.txt
Passed in:
(string) 'ENDING IN COLON
“colon”:: colon
“period”.: colon
“semicolon”;: colon
“exclamation”!: colon
“question”?: colon
“comma”,: colon

ENDING IN PERIOD
“colon”:. period
“period”. period
“semicolon”;. period
“exclamation”!. period
“question”?. period
“comma”,. period

ENDING IN SEMICOLON
“colon”:; semicolon
“period”.; semicolon
“semicolon”;; semicolon
“exclamation”!; semicolon
“question”?; semicolon
“comma”,; semicolon

ENDING IN EXCLAMATION
“colon”:! exclamation
“period”.! exclamation
“semicolon”;! exclamation
“exclamation”!! exclamation
“question”?! exclamation
“comma”,! exclamation

ENDING IN QUESTION
“colon”:? question
“period”.? question
“semicolon”;? question
“exclamation”!? question
“question”?? question
“comma”,? question

ENDING IN COMMA
“colon”:, comma
“period”., comma
“semicolon”;, comma
“exclamation”!, comma
“question”?, comma
“comma”, comma'
Expected:
(string) 'ENDING IN COLON
“colon”: colon
“period”.: colon
“semicolon”; colon
“exclamation”! colon
“question”? colon
“comma”,: colon

ENDING IN PERIOD
“colon”: period
“period”. period
“semicolon”; period
“exclamation”! period
“question”? period
“comma”,. period

ENDING IN SEMICOLON
“colon”:; semicolon
“period”.; semicolon
“semicolon”; semicolon
“exclamation”!; semicolon
“question”?; semicolon
“comma”,; semicolon

ENDING IN EXCLAMATION
“colon”! exclamation
“period”.! exclamation
“semicolon”! exclamation
“exclamation”! exclamation
“question”?! exclamation
“comma”,! exclamation

ENDING IN QUESTION
“colon”? question
“period”.? question
“semicolon”? question
“exclamation”!? question
“question”? question
“comma”,? question

ENDING IN COMMA
“colon”:, comma
“period”., comma
“semicolon”;, comma
“exclamation”!, comma
“question”?, comma
“comma”, comma'

Failure → citeproc test test-suite sort_CaseInsensitiveCitation.txt
Passed in:
(string) 'Xyz - ABC - Aaa'
Expected:
(string) 'Aaa - ABC - Xyz'

Failure → citeproc test test-suite sort_Citation.txt
Passed in:
(string) 'Roe; Doe'
Expected:
(string) 'Doe; Roe'

Failure → citeproc test test-suite sort_CitationSecondaryKey.txt
Passed in:
(string) 'Roe 1995; Doe 1995'
Expected:
(string) 'Doe 1995; Roe 1995'

Failure → citeproc test test-suite sort_CiteGroupDelimiter.txt
Passed in:
(string) 'Aalto 2001; Banda 1999; Aalto 2000'
Expected:
(string) 'Banda 1999; Aalto 2000, Aalto 2001'

Failure → citeproc test test-suite sort_DateVariable.txt
Passed in:
(string) 'Book A; Book B'
Expected:
(string) 'Book B; Book A'

Failure → citeproc test test-suite sort_DateVariableMixedElementsAscendingA.txt
Passed in:
(string) 'Book A; Book B'
Expected:
(string) 'Book B; Book A'

Failure → citeproc test test-suite sort_DateVariableMixedElementsDescendingB.txt
Passed in:
(string) 'Book A; Book B'
Expected:
(string) 'Book B; Book A'

Failure → citeproc test test-suite sort_DateVariableRange.txt
Passed in:
(string) 'Book A; Book B'
Expected:
(string) 'Book B; Book A'

Failure → citeproc test test-suite sort_DateVariableRangeMixed.txt
Passed in:
(string) 'Book A; Book B'
Expected:
(string) 'Book B; Book A'

Failure → citeproc test test-suite sort_GroupedByAuthorstring.txt
Passed in:
(string) '>>[0] Smith 2010; Jones 2005; Smith 2003'
Expected:
(string) '>>[0] Smith 2003, 2010; Jones 2005'

Failure → citeproc test test-suite sort_LocalizedDateLimitedParts.txt
Passed in:
(string) 'Book A; Book C; Book D; Book B'
Expected:
(string) 'Book D; Book A; Book B; Book C'

Failure → citeproc test test-suite textcase_LocaleUnicode.txt
Passed in:
(string) 'IA AND IB EN
IA AND IB EN
IC AND ID TR
BAD LANGUAGE CODE THAT PASSES IN NODE.JS BUT FAILS IN SOME BROWSERS'
Expected:
(string) 'IA AND IB EN
IA AND IB EN
İC AND ID TR
BAD LANGUAGE CODE THAT PASSES IN NODE.JS BUT FAILS IN SOME BROWSERS'

Failure → citeproc test test-suite textcase_NoSpaceBeforeApostrophe.txt
Passed in:
(string) 'Marcus Shafi’i (ed.), Response to Shafi’I Comment
Marcus Shafi`i (ed.), Response to Shafi`i Comment'
Expected:
(string) 'Marcus Shafi’i (ed.), Response to Shafi’i Comment
Marcus Shafi`i (ed.), Response to Shafi`i Comment'

Failure → citeproc test test-suite textcase_SentenceCapitalization.txt
Passed in:
(string) 'This is a Pen that is a Smith Pencil'
Expected:
(string) 'This is a pen that is a Smith pencil'

Failure → citeproc test test-suite textcase_SkipNameParticlesInTitleCase.txt
Passed in:
(string) 'John von Doe: An About up Life; John van Doe? A Life; John D’Doe! A Life; John de Doe a Life'
Expected:
(string) 'John von Doe: An about up Life; John van Doe? A Life; John d’Doe! A Life; John de Doe a Life'

Failure → citeproc test test-suite variables_ContainerTitleShort.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. In: Container: a title. (Series: a title). </div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. Container. </div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. In: Container: a title. (Series: a title).</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. Container.</div>
  </div>
</div>'

Failure → citeproc test test-suite variables_ContainerTitleShort2.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. In  p. 25. </div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. :25. </div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. In: Container: a title. p. 25. (Series: a title).</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. Container. :25.</div>
  </div>
</div>'

Error → citeproc test test-suite affix_WithCommas.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_AccidentalAllCaps.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_AllCapsLeakage.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_AsmJournals.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_AuthorPosition.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_AuthorYear.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_BadDelimiterBeforeCollapse.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_ByBy.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_ChicagoAuthorDateLooping.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_CollapseFailure.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_CreepingAddNames.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_DemoPageFullCiteCruftOnSubsequent.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_DisambiguationAddNames.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_DisambiguationAddNamesBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_DoubleEncodedAngleBraces.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_DuplicateSpaces2.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_DuplicateSpaces3.txt
./citeproc/citeproc-node-locale.lua:99: attempt to concatenate a nil value (local 'key')

Error → citeproc test test-suite bugreports_DuplicateTerminalPunctuationInBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_FourAndFour.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_GreekStyleProblems.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_GreekStyleTwoEditors.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_LabelsOutOfPlace.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_MatchedAuthorAndDate.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_MissingItemInJoin.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_MovePunctuationInsideQuotesForLocator.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_NoCaseEscape.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_NoEventInNestedMacroWithOldProcessor.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_NoTitle.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_OldMhraDisambiguationFailure.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_ProcessorHang1.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_SelfLink.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_SingleQuoteXml.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_SmallCapsEscape.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_SortSecondaryKey.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_SortSecondaryKeyBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_SortedIeeeItalicsFail.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_StyleError001.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_ThesisUniversityAppearsTwice.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_UndefinedBeforeVal.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_UndefinedInName.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_UndefinedInName2.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_YearSuffixInHarvard1.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_YearSuffixLingers.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_disambiguate.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_ikeyOne.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_parenthesis.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite bugreports_undefinedCrash.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite collapse_ChicagoAfterCollapse.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite collapse_CitationNumberRangesWithAffixesGrouped.txt
./citeproc/citeproc-node-locale.lua:99: attempt to concatenate a nil value (local 'key')

Error → citeproc test test-suite collapse_CitationNumberRangesWithAffixesGroupedLocator.txt
./citeproc/citeproc-node-locale.lua:99: attempt to concatenate a nil value (local 'key')

Error → citeproc test test-suite condition_RefTypeBranching.txt
./citeproc/citeproc-node-locale.lua:99: attempt to concatenate a nil value (local 'key')

Error → citeproc test test-suite date_AccessedCrash.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite date_DisappearingBug.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite date_KeyVariable.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite date_NonexistentSortReverseBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite date_SortEmptyDatesBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_AllNamesBaseNameCountOnFailureIfYearSuffixAvailable.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_AllNamesWithInitialsBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_ByCiteIncremental1.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_ByCiteIncremental2.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_ByCiteIsDefault.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_ByCiteMinimalGivennameExpandMinimalNames.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_FailWithYearSuffix.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_HonorFullnameInBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_InitializeWithButNoDisambiguation.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_SetsOfNames.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_SkipAccessedYearSuffix.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_WithOriginalYear.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_YearSuffixAndSort.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_YearSuffixMidInsert.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_YearSuffixTwoPairsBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_YearSuffixTwoPairsFirstNameBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_YearSuffixTwoPairsFullNamesBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite disambiguate_YearSuffixWithMixedCreatorTypes.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite display_LostSuffix.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite etal_CitationAndBibliographyDecorationsInBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite etal_CitationAndBibliographyDecorationsInCitation.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite flipflop_Apostrophes.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite fullstyles_ABdNT.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite fullstyles_APA.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite fullstyles_ChicagoArticleTitleQuestion.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite fullstyles_ChicagoAuthorDateSimple.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite fullstyles_ChicagoNoteWithBibliographyWithPublisher.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite group_ComplexNesting.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite group_SuppressWithEmptyNestedDateNode.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite integration_CitationSort.txt
./citeproc/citeproc-node-locale.lua:99: attempt to concatenate a nil value (local 'key')

Error → citeproc test test-suite integration_CitationSortTwice.txt
./citeproc/citeproc-node-locale.lua:99: attempt to concatenate a nil value (local 'key')

Error → citeproc test test-suite integration_SubsequentWhenInterveningFootnote.txt
./citeproc/citeproc-node-locale.lua:99: attempt to concatenate a nil value (local 'key')

Error → citeproc test test-suite label_EditorTranslator1.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite label_NameLabelThroughSubstitute.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite magic_CitationLabelInBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite magic_CitationLabelInCitation.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite magic_StripPeriodsTrueShortForm.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite magic_SubsequentAuthorSubstituteNotFooled.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite name_BibliographyNameFormNeverShrinks.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite name_CiteGroupDelimiterWithYearCollapse.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite name_CiteGroupDelimiterWithYearSuffixCollapse2.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite name_CiteGroupDelimiterWithYearSuffixCollapse3.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite name_EditorTranslatorBoth.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite name_EditorTranslatorWithTranslatorOnlyBib.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite name_EtAlWithCombined.txt
./citeproc/citeproc-node-choose.lua:168: attempt to index a nil value (field 'cite')

Error → citeproc test test-suite name_HyphenatedNonDroppingParticle1.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite name_HyphenatedNonDroppingParticle2.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite name_LiteralWithComma.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite number_LimitOrdinalsToDayOne.txt
./citeproc/citeproc-engine.lua:441: attempt to index a nil value (local 'ir')

Error → citeproc test test-suite number_NewOrdinalsEdition.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite position_IbidWithSuffix.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite position_NearNoteWithPlugin.txt
./citeproc/citeproc-node-locale.lua:99: attempt to concatenate a nil value (local 'key')

Error → citeproc test test-suite punctuation_DefaultYearSuffixDelimiter.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite punctuation_SemicolonDelimiter.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite punctuation_SuppressPrefixPeriodForDelimiterSemicolon.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite quotes_PunctuationNasty.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite quotes_QuotesUnderQuotesFalse.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite simplespace_case1.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_AguStyle.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_AguStyleReverseGroups.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_AuthorDateWithYearSuffix.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_BibliographyCitationNumberDescending.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_BibliographyCitationNumberDescendingSecondary.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_BibliographyCitationNumberDescendingViaCompositeMacro.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_BibliographyCitationNumberDescendingViaMacro.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_BibliographyResortOnUpdate.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_CaseInsensitiveBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_ChangeInNameSort.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_ChicagoYearSuffix1.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_ChicagoYearSuffix2.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_CitationNumberPrimaryAscendingViaMacroBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_CitationNumberPrimaryAscendingViaMacroCitation.txt
./citeproc/citeproc-engine.lua:237: attempt to index a nil value (field 'properties')

Error → citeproc test test-suite sort_CitationNumberPrimaryAscendingViaVariableBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_CitationNumberPrimaryAscendingViaVariableCitation.txt
./citeproc/citeproc-engine.lua:237: attempt to index a nil value (field 'properties')

Error → citeproc test test-suite sort_CitationNumberPrimaryDescendingViaMacroBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_CitationNumberPrimaryDescendingViaMacroCitation.txt
./citeproc/citeproc-engine.lua:237: attempt to index a nil value (field 'properties')

Error → citeproc test test-suite sort_CitationNumberPrimaryDescendingViaVariableBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_CitationNumberPrimaryDescendingViaVariableCitation.txt
./citeproc/citeproc-engine.lua:237: attempt to index a nil value (field 'properties')

Error → citeproc test test-suite sort_CitationNumberSecondaryAscendingViaMacroBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_CitationNumberSecondaryAscendingViaMacroCitation.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_CitationNumberSecondaryAscendingViaVariableBibliography.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_CitationNumberSecondaryAscendingViaVariableCitation.txt
./citeproc/citeproc-engine.lua:237: attempt to index a nil value (field 'properties')

Error → citeproc test test-suite sort_ConditionalMacroDates.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_DaleDalebout.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_DateMacroSortWithSecondFieldAlign.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_DropNameLabelInSort.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_EtAlUseLast.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_FamilyOnly.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_LeadingA.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_LeadingApostropheOnNameParticle.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_NameImplicitSortOrderAndForm.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_NameParticleInNameSortFalse.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_NameParticleInNameSortTrue.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_NameVariable.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_NamesUseLast.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_NumberOfAuthorsAsKey.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_OmittedBibRefMixedNumericStyle.txt
./citeproc/citeproc-engine.lua:441: attempt to index a nil value (local 'ir')

Error → citeproc test test-suite sort_OmittedBibRefNonNumericStyle.txt
./citeproc/citeproc-engine.lua:441: attempt to index a nil value (local 'ir')

Error → citeproc test test-suite sort_Quotes.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_RangeUnaffected.txt
./citeproc/citeproc-node-locale.lua:99: attempt to concatenate a nil value (local 'key')

Error → citeproc test test-suite sort_SeparateAuthorsAndOthers.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_StatusFieldAscending.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_StatusFieldDescending.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_SubstituteTitle.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_VariousNameMacros1.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_VariousNameMacros2.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_VariousNameMacros3.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite sort_WithAndInOneEntry.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite substitute_SharedMacro.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite testers_FirstAutoGeneratedZoteroPluginTest.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite testers_SecondAutoGeneratedZoteroPluginTest.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)

Error → citeproc test test-suite textcase_RepeatedTitleBug.txt
./citeproc/citeproc-node-sort.lua:35: bad argument #1 to 'sub' (string expected, got nil)
