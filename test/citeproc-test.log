category       success failure   error pending
-------------- ------- ------- ------- -------
affix                8       1       0       0
bugreports          62      20       0       0
collapse             4      17       0       0
condition           17       0       0       0
date                97       4       0       0
decorations          7       0       0       0
disambiguate        61      10       0       0
display              2       2       0       0
etal                 4       0       0       0
flipflop            17       0       0       0
form                 3       0       0       0
fullstyles           2       3       0       0
group                6       1       0       0
integration         13       0       0       0
label               18       1       0       0
locale              23       0       0       0
locator              5       0       0       0
magic               33       6       1       0
name                97       7       1       0
nameattr            97       0       0       0
nameorder            6       0       0       0
namespaces           1       0       0       0
number              18       0       0       0
page                 9       0       0       0
plural               7       0       0       0
position            14       0       0       0
punctuation          9       7       0       0
quotes               4       0       0       0
simplespace          1       0       0       0
sort                46      10       0       0
sortseparator        1       0       0       0
substitute           6       1       0       0
testers              2       0       0       0
textcase            27       0       0       0
unicode              1       0       0       0
variables            3       2       0       0
virtual              1       0       0       0
-------------- ------- ------- ------- -------
(all)              732      92       2       0

Failure → citeproc test test-suite affix_WithCommas.txt
Passed in:
(string) '..[0] John Smith, <i>Book C</i>, 2000, and David Jones, <i>Book D</i>, 2000.
..[1] Smith, <i>Book C</i> is one source,; Jones, <i>Book D</i> is another.
>>[2] Smith, <i>Book C</i>, 23 is one source,; Jones, <i>Book D</i> is another.'
Expected:
(string) '..[0] John Smith, <i>Book C</i>, 2000, and David Jones, <i>Book D</i>, 2000.
..[1] Smith, <i>Book C</i> is one source, Jones, <i>Book D</i> is another.
>>[2] Smith, <i>Book C</i>, 23 is one source, Jones, <i>Book D</i> is another.'

Failure → citeproc test test-suite bugreports_AutomaticallyDeleteItemsFails.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> J. Doe, <i>Book A</i>, 2000.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> J. Doe, <i>Book B</i>, 2000.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[3]</div><div class="csl-right-inline"> R. Snoakes, <i>Book C</i>, 2000.</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> J. Doe, <i>Book A</i>, 2000.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> J. Doe, <i>Book B</i>, 2000.</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_BadDelimiterBeforeCollapse.txt
Passed in:
(string) '(Jones 2000; Smith 2000a; Smith 2000b)'
Expected:
(string) '(Jones 2000; Smith 2000a,b)'

Failure → citeproc test test-suite bugreports_ByBy.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Review of <i>My Title</i>, by Burtle, Beaver. n.d.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Review of <i>My Title</i>, by Beaver Burtle. n.d.</div>
</div>'

Failure → citeproc test test-suite bugreports_ChicagoAuthorDateLooping.txt
Passed in:
(string) '(Manstein 1982; Anon.; Anon.)'
Expected:
(string) '(Anon.; Anon.; Manstein 1982)'

Failure → citeproc test test-suite bugreports_CitationSortsWithEtAl.txt
Passed in:
(string) '[<i>Aalto et al.</i>, 1999; <i>Aalto et al.</i>, 2000; <i>Aalto et al.</i>, 2001]'
Expected:
(string) '[<i>Aalto et al.</i>, 1999, 2000, 2001]'

Failure → citeproc test test-suite bugreports_CollapseFailure.txt
Passed in:
(string) '(Doe et al. 1965a; Doe et al. 1965b; Doe et al. 1970)'
Expected:
(string) '(Doe et al. 1965a, 1965b, 1970)'

Failure → citeproc test test-suite bugreports_DemoPageFullCiteCruftOnSubsequent.txt
Passed in:
(string) 'Nolan J. Malone, U.S. Bureau of the Census, <i>Evaluating Components of International Migration: Consistency of 2000 Nativity Data</i> (New York: Routledge, 2001).'
Expected:
(string) 'Malone and U.S. Bureau of the Census, <i>Evaluating Components of International Migration: Consistency of 2000 Nativity Data</i>.'

Failure → citeproc test test-suite bugreports_DisambiguationAddNames.txt
Passed in:
(string) '(Roe et al., 1995a; Roe et al., 1995b)'
Expected:
(string) '(Roe et al., 1995a, 1995b)'

Failure → citeproc test test-suite bugreports_EnvAndUrb.txt
Passed in:
(string) '..[0] Baines, T S, O Benedettini and J M Kay, ‘Title One’; Baines, T S, F Gump and J M Kay, ‘Title Two’.
..[1] See reference 1.
>>[2] See reference 1, Baines et al., ‘Title Two’.'
Expected:
(string) '>>[0] Baines, T S, O Benedettini and J M Kay, ‘Title One’; Baines, T S, F Gump and J M Kay, ‘Title Two’.
..[1] See reference 1, Baines et al.
>>[2] See reference 1, Baines et al.'

Failure → citeproc test test-suite bugreports_MatchedAuthorAndDate.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Brown, J. 2006a, August. <i><b>Tijdschrift voor praktijkondersteuning</b></i>. http://dx.doi.org/10.1007/bf03074904.</div>
  <div class="csl-entry">Brown, J. 2006b, August. <i><b>Huisarts en Wetenschap</b></i>. http://dx.doi.org/10.1007/bf03084836.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Brown, J. 2006a, August. <b><i>Tijdschrift voor praktijkondersteuning</i></b>. http://dx.doi.org/10.1007/bf03074904.</div>
  <div class="csl-entry">Brown, J. 2006b, August. <b><i>Huisarts en Wetenschap</i></b>. http://dx.doi.org/10.1007/bf03084836.</div>
</div>'

Failure → citeproc test test-suite bugreports_MovePunctuationInsideQuotesForLocator.txt
Passed in:
(string) 'Jennifer J. Davis, “Men of Taste: Gender and Authority in the French Culinary Trades, 1730-1830” (Ph.D. diss., Pennsylvania State University, History, 2004), “gargoyle.”'
Expected:
(string) 'Jennifer J. Davis, “Men of Taste: Gender and Authority in the French Culinary Trades, 1730-1830” (Ph.D. diss., Pennsylvania State University, History, 2004), s.v. “gargoyle.”'

Failure → citeproc test test-suite bugreports_NoCaseEscape.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">Aalto, Alan</div>

    <div class="csl-left-margin"> N.d.</div><div class="csl-right-inline">““PIAAC-Longitudinal (PIAAC-L) 2015.””</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Aalto, Alan</div>

    <div class="csl-left-margin"> N.d.</div><div class="csl-right-inline">“PIAAC-Longitudinal (PIAAC-Lx) 2015.”</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">Aalto, Alan</div>

    <div class="csl-left-margin"> N.d.</div><div class="csl-right-inline">“‘PIAAC-Longitudinal (PIAAC-L) 2015.’”</div>
  </div>
  <div class="csl-entry"> 
    <div class="csl-left-margin">N.d.</div><div class="csl-right-inline">“PIAAC-Longitudinal (PIAAC-Lx) 2015.”</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_OldMhraDisambiguationFailure.txt
Passed in:
(string) '..[0] John Doe, <i>Book A</i>, 2000; John Doe, <i>Book B</i>, 2000.
>>[1] Doe, Book A; Doe, Book B.'
Expected:
(string) '>>[0] John Doe, <i>Book A</i>, 2000; John Doe, <i>Book B</i>, 2000.
>>[1] Doe, Book A; Doe, Book B.'

Failure → citeproc test test-suite bugreports_ProcessorHang1.txt
Passed in:
(string) '(Philpott, Arendt, et al. 2008)
(Philpott, Perfecto, et al. 2008a)
(Philpott, Perfecto, et al. 2008b)'
Expected:
(string) '(Philpott, Arendt, et al. 2008)
(Philpott, Perfecto, et al. 2008<i>a</i>)
(Philpott, Perfecto, et al. 2008<i>b</i>)'

Failure → citeproc test test-suite bugreports_SingleQuote.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline">“production d ' eau glacée à condensation à eau avec récupération de chaleur . Modélisation simplifiée dans l ’ optique d ’ un calcul des consommations d ’ énergie d ’ une insta.”</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline">“production d ’ eau glacée à condensation à eau avec récupération de chaleur . Modélisation simplifiée dans l ’ optique d ’ un calcul des consommations d ’ énergie d ’ une insta.”</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_SingleQuoteXml.txt
Passed in:
(string) '[O A. "hello" <i>Book Title</i> ; Cite with a composer]'
Expected:
(string) '[Cite with a composer ; O A. "hello" <i>Book Title</i>]'

Failure → citeproc test test-suite bugreports_SmallCapsEscape.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">Aalto, Alan</div>

    <div class="csl-left-margin"> N.d.</div><div class="csl-right-inline"><span style="font-variant:small-caps;">Here</span></div>
    .</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">Aalto, Alan</div>

    <div class="csl-left-margin"> N.d.</div><div class="csl-right-inline"><span style="font-variant:small-caps;">Here</span>.</div>
  </div>
</div>'

Failure → citeproc test test-suite bugreports_SortSecondaryKey.txt
Passed in:
(string) '(Roe, 1995; Roe, 1996)'
Expected:
(string) '(Roe, 1995, 1996)'

Failure → citeproc test test-suite bugreports_YearSuffixInHarvard1.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Africa News, 2006a. Burkina Faso: Journalist Case Puts Spotlight On Justice System. <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2010. Niger: Who Really Ousted Tandja, And Why?. <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2007. Uganda: Police Protect Besigye Rally. <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2006b. Uganda: UK, US Deploy Observers. <i>Africa News</i>.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Africa News, 2006a. Burkina Faso: Journalist Case Puts Spotlight On Justice System. <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2010. Niger: Who Really Ousted Tandja, And Why? <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2007. Uganda: Police Protect Besigye Rally. <i>Africa News</i>.</div>
  <div class="csl-entry">Africa News, 2006b. Uganda: UK, US Deploy Observers. <i>Africa News</i>.</div>
</div>'

Failure → citeproc test test-suite bugreports_ikeyOne.txt
Passed in:
(string) '>>[0] (James Smith)'
Expected:
(string) '>>[0] (Smith)'

Failure → citeproc test test-suite collapse_AuthorCollapse.txt
Passed in:
(string) '(Smith 1900, Smith 2000)'
Expected:
(string) '(Smith 1900, 2000)'

Failure → citeproc test test-suite collapse_AuthorCollapseNoDate.txt
Passed in:
(string) '(Smith, Smith 1900, Smith 2000)'
Expected:
(string) '(Smith, 1900, 2000)'

Failure → citeproc test test-suite collapse_AuthorCollapseNoDateSorted.txt
Passed in:
(string) '(Smith 325AD, Smith 2000, Smith)'
Expected:
(string) '(Smith 325AD, 2000)'

Failure → citeproc test test-suite collapse_ChicagoAfterCollapse.txt
Passed in:
(string) '(Whittaker 1967, Whittaker 1975, Wiens 1989a, Wiens 1989b)
(Wong 1999, 328, Wong 2000, 475, Garcia 1998, 67)
(Whittaker 1967, Wiens 1989b)'
Expected:
(string) '(Whittaker 1967, 1975; Wiens 1989a, 1989b)
(Wong 1999, 328; 2000, 475; Garcia 1998, 67)
(Whittaker 1967; Wiens 1989b)'

Failure → citeproc test test-suite collapse_CitationNumberRangesInsert.txt
Passed in:
(string) '..[0] [4]
>>[1] [1], [2], [3], [4]'
Expected:
(string) '..[0] [1]
>>[1] [1]–[4]'

Failure → citeproc test test-suite collapse_CitationNumberRangesMixed.txt
Passed in:
(string) '([1], [2], [3], [4], [5], [6], [7])
([1], [2], [3], [5], [6], [7])'
Expected:
(string) '([1]–[7])
([1]–[3], [5]–[7])'

Failure → citeproc test test-suite collapse_CitationNumberRangesMixed2.txt
Passed in:
(string) '([1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11])
([1], [3], [4], [5], [7], [9], [10], [11])'
Expected:
(string) '([1]–[11])
([1], [3]–[5], [7], [9]–[11])'

Failure → citeproc test test-suite collapse_CitationNumberRangesMixed3.txt
Passed in:
(string) '([1], [2], [3], [4], [5], [6], [7], [8])
([1], [4], [6], [7], [8])'
Expected:
(string) '([1]–[8])
([1], [4], [6]–[8])'

Failure → citeproc test test-suite collapse_CitationNumberRangesWithAffixes.txt
Passed in:
(string) '<b>([1],[2],[3])</b>'
Expected:
(string) '<b>([1]–[3])</b>'

Failure → citeproc test test-suite collapse_CitationNumberRangesWithAffixesGrouped.txt
Passed in:
(string) '<b>([1],[2],[3])</b>'
Expected:
(string) '<b>([1]–[3])</b>'

Failure → citeproc test test-suite collapse_NumericDuplicate.txt
Passed in:
(string) '(1,2,2,3,4)'
Expected:
(string) '(1,2,2–4)'

Failure → citeproc test test-suite collapse_NumericDuplicate2.txt
Passed in:
(string) '(1,2,3,3,4,5)'
Expected:
(string) '(1–3,3–5)'

Failure → citeproc test test-suite collapse_TrailingDelimiter.txt
Passed in:
(string) '(Condit et al. 2000, Condit et al. 1995, Condit et al. 1998, Connell 1971, Cortes &#38; Hunziker 1971)'
Expected:
(string) '(Condit et al. 2000, 1995, 1998; Connell 1971, Cortes &#38; Hunziker 1971)'

Failure → citeproc test test-suite collapse_YearSuffixCollapse.txt
Passed in:
(string) 'Smith 2000a, Smith 2000b, Smith 2000c, Smith 2000d, Smith 2000e, Smith 2001
Smith 2000a, Smith 2000c, Smith 2000d, Smith 2000e, Smith 2001'
Expected:
(string) 'Smith 2000a–e, 2001
Smith 2000a,c–e, 2001'

Failure → citeproc test test-suite collapse_YearSuffixCollapseNoRange.txt
Passed in:
(string) 'Smith 2000a, Smith 2000b, Smith 2000c, Smith 2000d, Smith 2000e, Smith 2001
Smith 2000a, Smith 2000c, Smith 2000d, Smith 2000e, Smith 2001'
Expected:
(string) 'Smith 2000a,b,c,d,e, 2001
Smith 2000a,c,d,e, 2001'

Failure → citeproc test test-suite collapse_YearSuffixCollapseNoYearSuffixDelimiter.txt
Passed in:
(string) 'Smith 2000a;Smith 2000b;Smith 2000c;Smith 2000d;Smith 2000e;Smith 2001
Smith 2000a;Smith 2000c;Smith 2000d;Smith 2000e;Smith 2001'
Expected:
(string) 'Smith 2000a–e;2001
Smith 2000a;c–e;2001'

Failure → citeproc test test-suite collapse_YearSuffixImplicitCollapseNoYearSuffixDelimiter.txt
Passed in:
(string) 'Smith 2000a;Smith 2000b;Smith 2000c;Smith 2000d;Smith 2000e;Smith 2001
Smith 2000a;Smith 2000c;Smith 2000d;Smith 2000e;Smith 2001'
Expected:
(string) 'Smith 2000a–e;2001
Smith 2000a;c–e;2001'

Failure → citeproc test test-suite date_LopsidedDataYearSuffixCollapse.txt
Passed in:
(string) '(Smith 1982a, Smith 1982b)'
Expected:
(string) '(Smith 1982a,b)'

Failure → citeproc test test-suite date_YearSuffixDelimiter.txt
Passed in:
(string) 'Doe 2000a;Doe 2000b;Doe 2001'
Expected:
(string) 'Doe 2000a,b;2001'

Failure → citeproc test test-suite date_YearSuffixImplicitWithNoDate.txt
Passed in:
(string) '(John Doe n.d. [Accessed: June 1, 1965]; John Doe n.d. [Accessed: June 1, 2065])'
Expected:
(string) '(John Doe n.d.-a [Accessed: June 1, 1965]; John Doe n.d.-b [Accessed: June 1, 2065])'

Failure → citeproc test test-suite date_YearSuffixWithNoDate.txt
Passed in:
(string) '(John Doe n.d. [Accessed: June 1, 1965]; John Doe n.d. [Accessed: June 1, 2065])'
Expected:
(string) '(John Doe n.d.-a [Accessed: June 1, 1965]; John Doe n.d.-b [Accessed: June 1, 2065])'

Failure → citeproc test test-suite disambiguate_BasedOnEtAlSubsequent.txt
Passed in:
(string) '(Baur, Fröberg, Baur, et al. 2000; Baur, Schileyko, Baur, et al. 2000; Doe 2000)'
Expected:
(string) '(Baur, Fröberg, Baur, et al. 2000<i>a</i>; Baur, Schileyko &#38; Baur 2000<i>b</i>; Doe 2000)'

Failure → citeproc test test-suite disambiguate_BasedOnSubsequentFormWithBackref2.txt
Passed in:
(string) '..[0] John Doe, His Book (2000); John Doe, His Other Book (2001).
..[1] Jane Roe, Her Book (1998).
..[2] Roe, supra note 2.
..[3] Doe, supra note 1.
>>[4] Roe, supra note 2.'
Expected:
(string) '..[0] John Doe, His Book (2000); John Doe, His Other Book (2001).
..[1] Jane Roe, Her Book (1998).
..[2] Roe, supra note 2.
..[3] Doe, His Book, supra note 1.
>>[4] Roe, supra note 2.'

Failure → citeproc test test-suite disambiguate_CitationLabelDefault.txt
Passed in:
(string) '; ;'
Expected:
(string) 'Asth00a; Asth00b; Bron00'

Failure → citeproc test test-suite disambiguate_CitationLabelInData.txt
Passed in:
(string) 'SpiffLabel1900; SpiffLabel1900; ; ;'
Expected:
(string) 'SpiffLabel1900a; SpiffLabel1900b; Bron00; BrCh98; DEFG26'

Failure → citeproc test test-suite disambiguate_DisambiguationHang.txt
Passed in:
(string) '..[0] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990)
..[1] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990b)
>>[2] (Caminiti, Johnson, &#38; Urbano 1990)'
Expected:
(string) '>>[0] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990a)
>>[1] (Caminiti, Johnson, Burnod, Galli, &#38; Ferraina 1990b)
>>[2] (Caminiti, Johnson, &#38; Urbano 1990)'

Failure → citeproc test test-suite disambiguate_InitializeWithButNoDisambiguation.txt
Passed in:
(string) '(Doe, 1965b; Doe, 1965a)'
Expected:
(string) '(Doe, 1965a, 1965b)'

Failure → citeproc test test-suite disambiguate_Trigraph.txt
Passed in:
(string) '[CSL STYLE ERROR: reference with no printed form.]
[CSL STYLE ERROR: reference with no printed form.]
[CSL STYLE ERROR: reference with no printed form.]'
Expected:
(string) 'Aalt02a
Aalt02b
Aalt02c'

Failure → citeproc test test-suite disambiguate_YearCollapseWithInstitution.txt
Passed in:
(string) '(Smith Co 2000a; Smith Co 2000b; Smith Co 2000c)
(Smith Co 2000b)
(Smith Co 2000c)'
Expected:
(string) '(Smith Co 2000a; 2000b; 2000c)
(Smith Co 2000b)
(Smith Co 2000c)'

Failure → citeproc test test-suite disambiguate_YearSuffixMixedDates.txt
Passed in:
(string) '(A Ylinen, 1995a; A Ylinen, 1995b; A Ylinen, 1995c)'
Expected:
(string) '(A Ylinen, 1995a; b; c)'

Failure → citeproc test test-suite disambiguate_YearSuffixWithEtAlSubequent.txt
Passed in:
(string) '(Smith 2000a; Smith 2000b; Smith 2000c)
(Smith 2000b)
(Smith 2000c)'
Expected:
(string) '(Smith 2000a; 2000b; 2000c)
(Smith 2000b)
(Smith 2000c)'

Failure → citeproc test test-suite display_AuthorAsHeading.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">John Aloysius Doe</div>

    <div class="csl-left-margin">1999</div><div class="csl-right-inline">Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">John Aloysius Doe</div>

    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">1999a</div><div class="csl-right-inline">Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">1999b</div><div class="csl-right-inline">Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">

    <div class="csl-block">John Aloysius Doe</div>

    <div class="csl-left-margin">1999</div><div class="csl-right-inline">Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa Aaaaa</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb Bbbbb</div>
  </div>
  <div class="csl-entry">

    <div class="csl-block">Jane Henrietta Roe</div>

    <div class="csl-left-margin">1999a</div><div class="csl-right-inline">Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc Ccccc</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">1999b</div><div class="csl-right-inline">Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd Ddddd</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2000</div><div class="csl-right-inline">Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee Eeeee</div>
  </div>
</div>'

Failure → citeproc test test-suite display_SecondFieldAlignMigratePunctuation.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> B. D’Arcus, <i>Boundaries of Dissent: Protest and State Power in the Media Age</i>, Routledge, 2005.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> F.G. Bennett Jr., “Getting Property Right: “Informal” Mortgages in the Japanese Courts,” <i>Pac. Rim L. &#38; Pol’y J.</i>, vol. 18, Aug. 2009, pp. 463–509.</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline"> B. D’Arcus, <i>Boundaries of Dissent: Protest and State Power in the Media Age</i>, Routledge, 2005.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[2]</div><div class="csl-right-inline"> F.G. Bennett Jr., “Getting Property Right: ‘Informal’ Mortgages in the Japanese Courts,” <i>Pac. Rim L. &#38; Pol’y J.</i>, vol. 18, Aug. 2009, pp. 463–509.</div>
  </div>
</div>'

Failure → citeproc test test-suite fullstyles_ABdNT.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">COLE, S. J.; MOORE, R. Hydrological modelling using raingauge- and radar-based estimators of areal rainfall. <b>Journal of Hydrology</b>, v. 358, n. 3-4, p. 159–181, 2008. </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">COLE, S. J.; MOORE, R. Hydrological modelling using raingauge- and radar-based estimators of areal rainfall. <b>Journal of Hydrology</b>, v. 358, n. 3–4, p. 159–181, 2008. </div>
</div>'

Failure → citeproc test test-suite fullstyles_ChicagoArticleTitleQuestion.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. 1994. An article is it?. <i>New Thinker</i> 10: 5.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. 1994. An article is it? <i>New Thinker</i> 10: 5.</div>
</div>'

Failure → citeproc test test-suite fullstyles_ChicagoAuthorDateSimple.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. 1990. <i>Book A</i>. Brobdingnag: Zardoz Press.</div>
  <div class="csl-entry">Doe, John, and Jane Roe. 1991. <i>Book B</i>.</div>
  <div class="csl-entry">Doe, John, Jane Roe, and Alvin Asthma. 1992. <i>Book C</i>.</div>
  <div class="csl-entry">Doe, John, Jane Roe, Alvin Asthma, Bob Bronchitis, Chris Cold, Don Dropsy, Ernie Enteritis, et al. 1993. <i>Book D</i>.</div>
  <div class="csl-entry">Doe, John, Jane Roe, Alvin Asthma, Bob Bronchitis, Chris Cold, Don Dropsy, Ernie Enteritis, et al. 1994. <i>Book E</i>.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. 1990. <i>Book A</i>. Brobdingnag: Zardoz Press.</div>
  <div class="csl-entry">Doe, John, and Jane Roe. 1991. <i>Book B</i>.</div>
  <div class="csl-entry">Doe, John, Jane Roe, and Alvin Asthma. 1992. <i>Book C</i>.</div>
  <div class="csl-entry">Doe, John, Jane Roe, Alvin Asthma, Bob Bronchitis, Chris Cold, Don Dropsy, Ernie Enteritis, et al. 1993. <i>Book D</i>.</div>
  <div class="csl-entry">---. 1994. <i>Book E</i>.</div>
</div>'

Failure → citeproc test test-suite group_ComplexNesting.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe Inc.. Retrieved June 1, 1965, from http://example.com/</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe Inc. (n.d.). Retrieved June 1, 1965, from http://example.com/</div>
</div>'

Failure → citeproc test test-suite label_EditorTranslator1.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">1.	Иванов И.И. 
    . Пример оформления книги с редактором и переводчиком в одном лице : вид издания : in 5 vols. Vol. 2 / И.И. Иванов, П.П. Петров, С.С. Сидоров; ed. Р.Р. Романов; tran. Р.Р. Романов Дополнительно. – Тюмень: Дом, 2013. – 10. – 100 p..</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">1.	Иванов И.И. Пример оформления книги с редактором и переводчиком в одном лице : вид издания : in 5 vols. Vol. 2 / И.И. Иванов, П.П. Петров, С.С. Сидоров; ed &#38; trans. Р.Р. Романов Дополнительно. – Тюмень: Дом, 2013. – 10. – 100 p.</div>
</div>'

Failure → citeproc test test-suite magic_CitationLabelInBibliography.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry"><div class="csl-right-inline">Roe, J. and Noakes, R.: Book A., 1978a.</div>
  </div>
  <div class="csl-entry"><div class="csl-right-inline">Doe, J.: Book A., 1965b.</div>
  </div>
  <div class="csl-entry"><div class="csl-right-inline">Roe, J. and Noakes, R.: Book A., 1978c.</div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">[Doe65]</div><div class="csl-right-inline">Doe, J.: Book A., 1965.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[RoNo78a]</div><div class="csl-right-inline">Roe, J. and Noakes, R.: Book A., 1978.</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">[RoNo78b]</div><div class="csl-right-inline">Roe, J. and Noakes, R.: Book A., 1978.</div>
  </div>
</div>'

Failure → citeproc test test-suite magic_CitationLabelInCitation.txt
Passed in:
(string) '[, , ]'
Expected:
(string) '[Doe65, RoNo78a, RoNo78b]'

Failure → citeproc test test-suite magic_ImplicitYearSuffixDelimiter.txt
Passed in:
(string) 'John Doe 1965a; John Doe 1965b'
Expected:
(string) 'John Doe 1965a; b'

Failure → citeproc test test-suite magic_ImplicitYearSuffixExplicitDelimiter.txt
Passed in:
(string) '(1965a; 1965b)'
Expected:
(string) '(1965a,b)'

Failure → citeproc test test-suite magic_SubsequentAuthorSubstitute.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">John Smith and Jane Roe, Book A (2000)</div>
  <div class="csl-entry">John Smith and Jane Roe, Book B (2001)</div>
  <div class="csl-entry">John Smith, Book C (2002)</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">John Smith and Jane Roe, Book A (2000)</div>
  <div class="csl-entry">———, Book B (2001)</div>
  <div class="csl-entry">John Smith, Book C (2002)</div>
</div>'

Failure → citeproc test test-suite magic_SubsequentAuthorSubstituteOfTitleField.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Warren Smith (2000)</div>
  <div class="csl-entry">Warren Smith (2001)</div>
  <div class="csl-entry">Book Y (2002)</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Warren Smith (2000)</div>
  <div class="csl-entry">----- (2001)</div>
  <div class="csl-entry">Book Y (2002)</div>
</div>'

Failure → citeproc test test-suite name_CiteGroupDelimiterWithYearCollapse.txt
Passed in:
(string) '(Aalto 2015a; Aalto 2015b)'
Expected:
(string) '(Aalto 2015a 2015b)'

Failure → citeproc test test-suite name_CiteGroupDelimiterWithYearSuffixCollapse.txt
Passed in:
(string) '(Aalto 2015a; Aalto 2015b)'
Expected:
(string) '(Aalto 2015a, b)'

Failure → citeproc test test-suite name_CiteGroupDelimiterWithYearSuffixCollapse2.txt
Passed in:
(string) '(Aalto 2015a; Aalto 2015b; Bartleby 2010; Aalto 2015c; Aalto 2015d; Aalto 2015e)'
Expected:
(string) '(Aalto 2015a,b; Bartleby 2010; Aalto 2015c–e)'

Failure → citeproc test test-suite name_CiteGroupDelimiterWithYearSuffixCollapse3.txt
Passed in:
(string) '(Aalto 2015a; Aalto 2015b; Bartleby 2010)'
Expected:
(string) '(Aalto 2015a,b; Bartleby 2010)'

Failure → citeproc test test-suite name_SubsequentAuthorSubstituteMultipleNames.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Bumke, Courtly Culture: Literature and Society in the High Middle Ages, Dunlap tran.</div>
  <div class="csl-entry">Bumke, Höfische</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Bumke, Courtly Culture: Literature and Society in the High Middle Ages, Dunlap tran.</div>
  <div class="csl-entry">-----, Höfische</div>
</div>'

Failure → citeproc test test-suite name_SubsequentAuthorSubstituteSingleField.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Yomiuri Shinbun.</div>
  <div class="csl-entry">Yomiuri Shinbun.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Yomiuri Shinbun.</div>
  <div class="csl-entry">———.</div>
</div>'

Failure → citeproc test test-suite name_SubstitutePartialEach.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Title One</div>
  <div class="csl-entry">Title One</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Title One</div>
  <div class="csl-entry">---</div>
</div>'

Failure → citeproc test test-suite punctuation_DefaultYearSuffixDelimiter.txt
Passed in:
(string) '(Aalto 2000a; Aalto 2000b; Aalto 2000c)'
Expected:
(string) '(Aalto 2000a; b; c)'

Failure → citeproc test test-suite punctuation_FrenchOrthography.txt
Passed in:
(string) 'His “ Anonymous ” Life'
Expected:
(string) 'His « Anonymous » Life'

Failure → citeproc test test-suite punctuation_FullMontyField.txt
Passed in:
(string) 'ENDING IN COLON
colon:: colon
period.: colon
semicolon;: colon
exclamation!: colon
question?: colon
comma,: colon

ENDING IN PERIOD
colon:. period
period. period
semicolon;. period
exclamation!. period
question?. period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon;; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon:! exclamation
period.! exclamation
semicolon;! exclamation
exclamation!! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon:? question
period.? question
semicolon;? question
exclamation!? question
question?? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'
Expected:
(string) 'ENDING IN COLON
colon: colon
period.: colon
semicolon; colon
exclamation! colon
question? colon
comma,: colon

ENDING IN PERIOD
colon: period
period. period
semicolon; period
exclamation! period
question? period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon! exclamation
period.! exclamation
semicolon! exclamation
exclamation! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon? question
period.? question
semicolon? question
exclamation!? question
question? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'

Failure → citeproc test test-suite punctuation_FullMontyPlain.txt
Passed in:
(string) 'ENDING IN COLON
colon:: colon
period.: colon
semicolon;: colon
exclamation!: colon
question?: colon
comma,: colon

ENDING IN PERIOD
colon:. period
period. period
semicolon;. period
exclamation!. period
question?. period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon;; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon:! exclamation
period.! exclamation
semicolon;! exclamation
exclamation!! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon:? question
period.? question
semicolon;? question
exclamation!? question
question?? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'
Expected:
(string) 'ENDING IN COLON
colon: colon
period.: colon
semicolon; colon
exclamation! colon
question? colon
comma,: colon

ENDING IN PERIOD
colon: period
period. period
semicolon; period
exclamation! period
question? period
comma,. period

ENDING IN SEMICOLON
colon:; semicolon
period.; semicolon
semicolon; semicolon
exclamation!; semicolon
question?; semicolon
comma,; semicolon

ENDING IN EXCLAMATION
colon! exclamation
period.! exclamation
semicolon! exclamation
exclamation! exclamation
question?! exclamation
comma,! exclamation

ENDING IN QUESTION
colon? question
period.? question
semicolon? question
exclamation!? question
question? question
comma,? question

ENDING IN COMMA
colon:, comma
period., comma
semicolon;, comma
exclamation!, comma
question?, comma
comma, comma'

Failure → citeproc test test-suite punctuation_FullMontyQuotesIn.txt
Passed in:
(string) 'ENDING IN COLON
“colon”:: colon
“period.”: colon
“semicolon;”: colon
“exclamation”!: colon
“question?”: colon
“comma,”: colon

ENDING IN PERIOD
“colon”:. period
“period.” period
“semicolon;”. period
“exclamation”!. period
“question?”. period
“comma,”. period

ENDING IN SEMICOLON
“colon”:; semicolon
“period.”; semicolon
“semicolon;”; semicolon
“exclamation”!; semicolon
“question?”; semicolon
“comma,”; semicolon

ENDING IN EXCLAMATION
“colon”:! exclamation
“period.”! exclamation
“semicolon;”! exclamation
“exclamation”!! exclamation
“question?”! exclamation
“comma,”! exclamation

ENDING IN QUESTION
“colon”:? question
“period.”? question
“semicolon;”? question
“exclamation”!? question
“question?”? question
“comma,”? question

ENDING IN COMMA
“colon”:, comma
“period.”, comma
“semicolon;”, comma
“exclamation”!, comma
“question?”, comma
“comma,” comma'
Expected:
(string) 'ENDING IN COLON
“colon”: colon
“period.”: colon
“semicolon”; colon
“exclamation!” colon
“question?” colon
“comma,”: colon

ENDING IN PERIOD
“colon”: period
“period.” period
“semicolon”; period
“exclamation!” period
“question?” period
“comma,.” period

ENDING IN SEMICOLON
“colon”:; semicolon
“period.”; semicolon
“semicolon”; semicolon
“exclamation!”; semicolon
“question?”; semicolon
“comma,”; semicolon

ENDING IN EXCLAMATION
“colon!” exclamation
“period.!” exclamation
“semicolon!” exclamation
“exclamation!” exclamation
“question?!” exclamation
“comma,!” exclamation

ENDING IN QUESTION
“colon?” question
“period.?” question
“semicolon?” question
“exclamation!?” question
“question?” question
“comma,?” question

ENDING IN COMMA
“colon”:, comma
“period.,” comma
“semicolon”;, comma
“exclamation!,” comma
“question?,” comma
“comma,” comma'

Failure → citeproc test test-suite punctuation_FullMontyQuotesOut.txt
Passed in:
(string) 'ENDING IN COLON
“colon”:: colon
“period”.: colon
“semicolon”;: colon
“exclamation”!: colon
“question”?: colon
“comma”,: colon

ENDING IN PERIOD
“colon”:. period
“period”. period
“semicolon”;. period
“exclamation”!. period
“question”?. period
“comma”,. period

ENDING IN SEMICOLON
“colon”:; semicolon
“period”.; semicolon
“semicolon”;; semicolon
“exclamation”!; semicolon
“question”?; semicolon
“comma”,; semicolon

ENDING IN EXCLAMATION
“colon”:! exclamation
“period”.! exclamation
“semicolon”;! exclamation
“exclamation”!! exclamation
“question”?! exclamation
“comma”,! exclamation

ENDING IN QUESTION
“colon”:? question
“period”.? question
“semicolon”;? question
“exclamation”!? question
“question”?? question
“comma”,? question

ENDING IN COMMA
“colon”:, comma
“period”., comma
“semicolon”;, comma
“exclamation”!, comma
“question”?, comma
“comma”, comma'
Expected:
(string) 'ENDING IN COLON
“colon”: colon
“period”.: colon
“semicolon”; colon
“exclamation”! colon
“question”? colon
“comma”,: colon

ENDING IN PERIOD
“colon”: period
“period”. period
“semicolon”; period
“exclamation”! period
“question”? period
“comma”,. period

ENDING IN SEMICOLON
“colon”:; semicolon
“period”.; semicolon
“semicolon”; semicolon
“exclamation”!; semicolon
“question”?; semicolon
“comma”,; semicolon

ENDING IN EXCLAMATION
“colon”! exclamation
“period”.! exclamation
“semicolon”! exclamation
“exclamation”! exclamation
“question”?! exclamation
“comma”,! exclamation

ENDING IN QUESTION
“colon”? question
“period”.? question
“semicolon”? question
“exclamation”!? question
“question”? question
“comma”,? question

ENDING IN COMMA
“colon”:, comma
“period”., comma
“semicolon”;, comma
“exclamation”!, comma
“question”?, comma
“comma”, comma'

Failure → citeproc test test-suite punctuation_SuppressPrefixPeriodForDelimiterSemicolon.txt
Passed in:
(string) '..[0] John Doe, “His Anonymous Life,” 1965; Jane Roe, “Her Anonymous Life,” 1965.
>>[1] Doe, “His Anonymous Life;” Roe, “Her Anonymous Life.”'
Expected:
(string) '..[0] John Doe, “His Anonymous Life,” 1965; Jane Roe, “Her Anonymous Life,” 1965.
>>[1] Doe, “His Anonymous Life”; Roe, “Her Anonymous Life.”'

Failure → citeproc test test-suite sort_AuthorDateWithYearSuffix.txt
Passed in:
(string) '>>[0] (Day and Fitzpatrick, 2005a; Mian et al., 2005; Day and Fitzpatrick, 2005b)'
Expected:
(string) '>>[0] (Day and Fitzpatrick, 2005a, 2005b; Mian et al., 2005)'

Failure → citeproc test test-suite sort_ChicagoYearSuffix1.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Beijing Zoo. 1974a. Observations on the breeding of the giant panda and the raising of its young [in Chinese]. <i>Acta Zoologica Sinica</i> 20: 154–61.</div>
  <div class="csl-entry">Beijing Zoo. 1974b. On the diseases of the giant panda and their preventive and curative measures [in Chinese]. <i>Acta Zoologica Sinica</i> 20: 139–47.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Beijing Zoo. 1974a. Observations on the breeding of the giant panda and the raising of its young [in Chinese]. <i>Acta Zoologica Sinica</i> 20: 154–61.</div>
  <div class="csl-entry">---. 1974b. On the diseases of the giant panda and their preventive and curative measures [in Chinese]. <i>Acta Zoologica Sinica</i> 20: 139–47.</div>
</div>'

Failure → citeproc test test-suite sort_ChicagoYearSuffix2.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Beijing Zoo. 1974a. Observations on the breeding of the giant panda and the raising of its young [in Chinese]. <i>Acta Zoologica Sinica</i> 20: 154–61.</div>
  <div class="csl-entry">Beijing Zoo. 1974b. On the diseases of the giant panda and their preventive and curative measures [in Chinese]. <i>Acta Zoologica Sinica</i> 20: 139–47.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Beijing Zoo. 1974a. Observations on the breeding of the giant panda and the raising of its young [in Chinese]. <i>Acta Zoologica Sinica</i> 20: 154–61.</div>
  <div class="csl-entry">---. 1974b. On the diseases of the giant panda and their preventive and curative measures [in Chinese]. <i>Acta Zoologica Sinica</i> 20: 139–47.</div>
</div>'

Failure → citeproc test test-suite sort_CiteGroupDelimiter.txt
Passed in:
(string) 'Banda 1999; Aalto 2000; Aalto 2001'
Expected:
(string) 'Banda 1999; Aalto 2000, Aalto 2001'

Failure → citeproc test test-suite sort_DropNameLabelInSort.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John ed. <i>Hello</i>.</div>
  <div class="csl-entry">Doe, John. <i>Hello</i>.</div>
  <div class="csl-entry">Doe, John Eamon. <i>Hello</i>.</div>
  <div class="csl-entry">Doe, John Egbert. <i>Hello</i>.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John ed. <i>Hello</i>.</div>
  <div class="csl-entry">---. <i>Hello</i>.</div>
  <div class="csl-entry">Doe, John Eamon. <i>Hello</i>.</div>
  <div class="csl-entry">Doe, John Egbert. <i>Hello</i>.</div>
</div>'

Failure → citeproc test test-suite sort_GroupedByAuthorstring.txt
Passed in:
(string) '>>[0] Smith 2003; Jones 2005; Smith 2010'
Expected:
(string) '>>[0] Smith 2003, 2010; Jones 2005'

Failure → citeproc test test-suite sort_RangeUnaffected.txt
Passed in:
(string) '>>[0] <sup>3</sup>
>>[1] <sup>1,2,3</sup>'
Expected:
(string) '>>[0] <sup>1</sup>
>>[1] <sup>1–3</sup>'

Failure → citeproc test test-suite sort_SeparateAuthorsAndOthers.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. <i>Hello 4</i>.</div>
  <div class="csl-entry">Doe, John ed. <i>Hello 1</i>.</div>
  <div class="csl-entry">Doe, John Barbitol. <i>Hello 2</i>.</div>
  <div class="csl-entry">Doe, John Egbert. <i>Hello 3</i>.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Doe, John. <i>Hello 4</i>.</div>
  <div class="csl-entry">--- ed. <i>Hello 1</i>.</div>
  <div class="csl-entry">Doe, John Barbitol. <i>Hello 2</i>.</div>
  <div class="csl-entry">Doe, John Egbert. <i>Hello 3</i>.</div>
</div>'

Failure → citeproc test test-suite sort_SubstituteTitle.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Brooker, C. (2011a, July 24). The news coverage of the Norway mass-killings was fact-free conjecture. <i>The Guardian</i>. London. Retrieved from http://www.guardian.co.uk/commentisfree/2011/jul/24/charlie-brooker-norway-mass-killings</div>
  <div class="csl-entry">Brooker, C. (2011b, July 31). Let’s think outside the box here: maybe blue-sky thinking is nonsense. <i>The Guardian</i>. London. Retrieved from http://www.guardian.co.uk/commentisfree/2011/jul/31/blue-sky-thinking</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Brooker, C. (2011, July 24). The news coverage of the Norway mass-killings was fact-free conjecture. <i>The Guardian</i>. London. Retrieved from http://www.guardian.co.uk/commentisfree/2011/jul/24/charlie-brooker-norway-mass-killings</div>
  <div class="csl-entry">Brooker, C. (2011, July 31). Let’s think outside the box here: maybe blue-sky thinking is nonsense. <i>The Guardian</i>. London. Retrieved from http://www.guardian.co.uk/commentisfree/2011/jul/31/blue-sky-thinking</div>
</div>'

Failure → citeproc test test-suite sort_WithAndInOneEntry.txt
Passed in:
(string) '(Beck 1991; Beck, Katz, and Tucker 1998; Beck, King, and Zeng 2000; Beck and Katz 2001; Beck and Katz 2011; Colaresi 2006; Colaresi, Rasler, and Thompson 2007; Colaresi and Thompson 2002; Gochman 1993; Gochman and Leng 1983; Gochman and Maoz 1984)'
Expected:
(string) '(Beck 1991; Beck and Katz 2001, 2011; Beck, Katz, and Tucker 1998; Beck, King, and Zeng 2000; Colaresi 2006; Colaresi, Rasler, and Thompson 2007; Colaresi and Thompson 2002; Gochman 1993; Gochman and Leng 1983; Gochman and Maoz 1984)'

Failure → citeproc test test-suite substitute_SharedMacro.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Alan Alto Inc.: Book Three.</div>
  <div class="csl-entry">Alan Alto Inc.: Book Four.</div>
  <div class="csl-entry">Alto, Alan: Book One.</div>
  <div class="csl-entry">Alto, Alan: Book Two.</div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">Alan Alto Inc.: Book Three.</div>
  <div class="csl-entry">---: Book Four.</div>
  <div class="csl-entry">Alto, Alan: Book One.</div>
  <div class="csl-entry">---: Book Two.</div>
</div>'

Failure → citeproc test test-suite variables_ContainerTitleShort.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. In: Container: a title. (Series: a title). </div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. Container. </div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. In: Container: a title. (Series: a title).</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. Main title. Container.</div>
  </div>
</div>'

Failure → citeproc test test-suite variables_ContainerTitleShort2.txt
Passed in:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. In p. 25. </div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. Container. :25. </div>
  </div>
</div>'
Expected:
(string) '<div class="csl-bib-body">
  <div class="csl-entry">
    <div class="csl-left-margin">1. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. In: Container: a title. p. 25. (Series: a title).</div>
  </div>
  <div class="csl-entry">
    <div class="csl-left-margin">2. </div><div class="csl-right-inline">Campbell DT, Fiske DW. CONVERGENT AND DISCRIMINANT VALIDATION BY THE MULTITRAIT-MULTIMETHOD MATRIX. Container. :25.</div>
  </div>
</div>'

Error → citeproc test test-suite magic_SubsequentAuthorSubstituteNotFooled.txt
./citeproc/citeproc-node-sort.lua:98: attempt to compare number with string

Error → citeproc test test-suite name_EtAlWithCombined.txt
./citeproc/citeproc-node-choose.lua:245: attempt to index a nil value (field 'cite')
